Type.registerNamespace("AppRealtimeChannel");AppRealtimeChannel.Q=function(){};AppRealtimeChannel.ApiType=function(){};AppRealtimeChannel.ApiType.prototype={SendNotification:0,SendPersistentState:1,FindSession:2,Last:3};AppRealtimeChannel.ApiType.registerEnum("AppRealtimeChannel.ApiType",!1);AppRealtimeChannel.EventCountType=function(){};AppRealtimeChannel.EventCountType.prototype={AttemptCount:0,SuccessCount:1,DropCount:2,FailedCount:3,LatencyOverThresholdCount:4,LatencyUnderThresholdCount:5,ThrottledCount:6,Last:7};AppRealtimeChannel.EventCountType.registerEnum("AppRealtimeChannel.EventCountType",!1);AppRealtimeChannel.P=function(){};AppRealtimeChannel.d=function(){};AppRealtimeChannel.d.registerInterface("AppRealtimeChannel.d");AppRealtimeChannel.V=function(){};AppRealtimeChannel.T=function(){};AppRealtimeChannel.W=function(){};AppRealtimeChannel.U=function(){};AppRealtimeChannel.X=function(){};AppRealtimeChannel.S=function(){};AppRealtimeChannel.S.registerInterface("AppRealtimeChannel.S");AppRealtimeChannel.R=function(){};AppRealtimeChannel.Y=function(){};AppRealtimeChannel.Y.registerInterface("AppRealtimeChannel.Y");AppRealtimeChannel.z=function(){};AppRealtimeChannel.z.registerInterface("AppRealtimeChannel.z");AppRealtimeChannel.y=function(){};AppRealtimeChannel.y.registerInterface("AppRealtimeChannel.y");AppRealtimeChannel.Z=function(){};AppRealtimeChannel.ba=function(){};AppRealtimeChannel.O=function(n){this.y=Function.createDelegate(this,this.B);this.z=Function.createDelegate(this,this.R);this.w=Function.createDelegate(this,this.Q);this.x=Function.createDelegate(this,this.A);this.a=n;this.a.b(this.x)};AppRealtimeChannel.O.prototype={a:null,h:null,g:0,f:!1,A:function(n,t){this.g=t.a},R:function(){Diag.a.a(18637070,500,15,"Too many undelivered messages. Restarting RTC connection.");this.a.a(null)},Q:function(n){this.h.c(n)}};AppRealtimeChannel.j=function(n){this.k=Function.createDelegate(this,this.n);this.i=AppRealtimeChannel.j.b;this.g=AppRealtimeChannel.j.a;this.h=this.k;this.j=n};AppRealtimeChannel.j.b=function(n,t){return window.setTimeout(n,t)};AppRealtimeChannel.j.a=function(n){window.clearTimeout(n)};AppRealtimeChannel.j.prototype={d:!1,f:0,e:!1,j:null,i:null,g:null,h:null,a:function(){if(!this.d){var n=this;this.f=this.i(function(){n.d=!1;n.m()},8e3);this.d=!0;this.e=!1}},b:function(){this.l()},c:function(){this.m()},m:function(){(this.l(),this.e)||(this.e=!0,this.h())},n:function(){Diag.a.a(4539720,500,50,"Usage statement for the Rtc_ConnectedEver KPI for [{0}]",this.j)},l:function(){this.d&&this.g(this.f);this.f=0;this.d=!1}};AppRealtimeChannel.w=function(){};AppRealtimeChannel.w.prototype={i:0,h:0,g:0,f:0,c:!1,j:null,d:null,a:null,b:null,e:null,k:function(){return this.d+"?"+this.a}};AppRealtimeChannel.g=function(n,t,i,r,u,f,e,o,s,h,c,l){var y,a,v;this.F=Function.createDelegate(this,this.Z);this.E=Function.createDelegate(this,this.Y);this.G=Function.createDelegate(this,this.ba);this.A=new Date(0).getTime();this.J=["enabled","errorMessage","url","connectionString","queryString","throttling_globalMaxNumberOfOutstandingMessages","throttling_maxNumberOfOutstandingMessages","throttling_timeToWaitForResponse","throttling_messageDelay"];this.I=["enabled","errorMessage"];y=this;a=function(){return AppRealtimeChannel.g.c(c?c():Common.a.i,u,f,e,n,t)};this.v=r;this.j=t;this.z=i;this.t=a();this.g=o;this.l=s;this.k=l;this.u=!1;this.r=9e4;h&&(v=this,h.a(function(n){n.e(function(){Diag.a.a(40768456,500,50,"Connection parameters refresh requested for client [{0}]",v.g);v.t=a()})}));100*Math.random()<=2&&(this.w=3e5);AppRealtimeChannel.a.a&&(AppRealtimeChannel.a.a.j=this.w)};AppRealtimeChannel.g.a=function(n,t,i,r,u,f,e,o,s,h,c){return AppRealtimeChannel.g.b(n,t,i,r,u,f,e,o,s,h,null,c)};AppRealtimeChannel.g.b=function(n,t,i,r,u,f,e,o,s,h,c,l){n=n||Common.y.a().a;var a=new AppRealtimeChannel.g(n,t,i,r,u,f,e,o,s,h,c,l);return a.X(),a};AppRealtimeChannel.g.c=function(n,t,i,r,u,f){var e=String.format("{0}={1}","qs",Common.d.a(n)),o;return e=String.format("{0}&{1}={2}",e,"ClientId",Common.d.a(r)),e=String.format("{0}&{1}={2}",e,"usid",Common.d.a(u)),e=String.format("{0}&{1}={2}",e,"UserApp",Common.d.a(i.toString())),e=String.format("{0}&{1}={2}",e,"UserType",Common.d.a(1..toString())),e=String.format("{0}&{1}={2}",e,"UserVersion",Common.d.a(t)),e=String.format("{0}&{1}={2}",e,"clientProtocol",Common.d.a("1.0")),o=AppRealtimeChannel.g.d(i,f),o&&(e=String.format("{0}&{1}",e,o)),e};AppRealtimeChannel.g.d=function(n,t){return n===4?String.format("{0}={1}","NoAuth","1"):t?t.x():null};AppRealtimeChannel.g.prototype={t:null,z:null,j:null,B:0,q:!1,p:!1,v:null,l:null,g:null,C:null,w:36e5,n:1e3,o:0,k:null,u:!1,i:null,s:0,x:null,m:null,y:!1,H:null,h:null,c:function(){return this.h},r:0,e:function(n){return this.r=n,n},f:function(n){this.m=n},X:function(){this.l.o(this.G);this.l.b(this.E)},Y:function(n,t){this.s=t.a;t.a===2&&(this.o=0)},a:function(n){return n.val=this.i.e,String.format("{0}&{1}={2}",this.i.a,"corrid",Common.d.a(n.val))},d:function(n,t,i,r,u){var f=this,e=this;this.bb(function(){r(u,"GetMachineIdSuccess")&&(Diag.a.a(17956951,500,50,"Successfully retrieved Rtc MachineId [{0}] for [{1}]",f.h,f.g),n(f.C),i(f.V()))},function(n){r(u,"GetMachineIdFailure")&&(Diag.a.a(4060129,500,15,"Failed to retrieve Rtc MachineId for [{0}]",e.g),t(n))},r,u)},b:function(){this.K();this.W()},bb:function(n,t,i,r){if(Diag.a.a(17956952,500,50,"Retrieving Rtc MachineId from server. Getting from last findsession, connectionString is [{0}] OrderlyShutdownInprogress is [{1}]",this.h,this.p),this.h){n();return}var u=this.S(),f=this;window.setTimeout(function(){f.sendFindSessionRequestToServerInternal(n,t,i,r)},u)},sendFindSessionRequestToServerInternal:function(n,t,i,r){var f;if(i(r,"RequestMachineId")){this.A=(new Date).getTime();var e=Common.g.a(),u=this,o=this;this.M(function(t){var r=Common.g.a(),i;u.O(t);u.D();n();i=Common.g.a()-r;Diag.a.a(577356039,345,50,"SFSRTS Success - TimeElapsed: {0}",i)},function(n){var r=Common.g.a(),i;o.K();AppRealtimeChannel.a.a&&AppRealtimeChannel.a.a.a(2,3);t(n);i=Common.g.a()-r;Diag.a.a(577356040,345,50,"SFSRTS Failure - TimeElapsed: {0}",i)},!1);f=Common.g.a()-e;Diag.a.a(577599296,345,50,"SFSRTS - TimeElapsed: {0}",f)}},W:function(){this.n+=3e3;this.n=Math.min(this.n,3e5)},S:function(){var t=(new Date).getTime(),n=this.A+this.n-t;return n<0&&(n=0),n},O:function(n){try{this.i=n;this.H=n.k();this.h=n.b;this.x=n.a;this.C=n.d}catch(t){Diag.a.a(17956953,500,10,"FindSession response contains invalid fields. Exception {0}, is thrown",t.toString())}},K:function(){this.h=null;this.L()},D:function(){this.L();this.q=!0;this.B=window.setTimeout(this.F,this.w)},L:function(){this.q&&(window.clearTimeout(this.B),this.q=!1)},Z:function(){this.q=!1;var n=this,t=this;this.M(function(t){var r=n.x!==t.a,i=n.h!==t.b,u=n.h;if(n.O(t),n.s){if(i){Diag.a.a(17956955,500,15,"Recycling RTC connection due to RTC machine id change. old={0}, new={1}",u||"null",t.b);n.l.a(null);return}n.l.F(r,i);n.D()}},function(){AppRealtimeChannel.a.a&&AppRealtimeChannel.a.a.a(2,3);t.D()},!0)},ba:function(){this.n=1e3},V:function(){return new AppRealtimeChannel.v(this.i.i,this.i.h,this.i.g,this.i.f)},bc:function(n){var t,i,r,f,u;if(Object.getType(n)!==Object)return null;t=n;i=t;for(r in i)f={key:r,value:i[r]};return u=this.T(t),u,u},T:function(n){var r,f,o,i,t;if(!("enabled"in n))return null;r=n.enabled;f=r?this.J:this.I;for(var e=f,s=e.length,u=0;u<s;++u)if(o=e[u],!(o in n))return null;return t=(i=new AppRealtimeChannel.w,i.c=n.enabled,i.j=n.errorMessage,i.e=Common.y.a().a,i),r&&(t.d=n.url,t.a=n.queryString,t.b=n.connectionString,t.f=n.throttling_globalMaxNumberOfOutstandingMessages,t.g=n.throttling_maxNumberOfOutstandingMessages,t.h=n.throttling_timeToWaitForResponse,t.i=n.throttling_messageDelay),t},U:function(n,t){Diag.a.a(50448152,500,50,"Using FindSessionUtils find session response");var i=this;this.k.a().CW(function(){var r=i.k.a().a();r?(Diag.a.a(50448153,500,50,"FindSessionUtils find Session resulted in success"),n(i.k.b())):(Diag.a.a(50448154,500,15,"FindSessionUtils find Session resulted in error"),t(i.k.b()))})},R:function(n,t,i,r,u){var f=this;return function(e){var s,o;if(AppRealtimeChannel.b.a().d(0,1,!1),n&&n.a(),f.N(e.b,!0,t),s=AppRealtimeChannel.c.c(e.b.a,"FindSession",null,!0),s)if(o=f.bc(s),o){if(o.c&&o.a&&o.b){Diag.a.a(4317446,500,50,"Successfully retrieved MachineId from server for [{0}]",f.g);f.m=null;i(o);return}t.FindSessionFailureReason="FindSessionInvalidResponse";t.IsRtcEnabled=o.c;t.IsQueryStringEmpty=!o.a;t.IsConnectionStringEmpty=!o.b;Diag.a.a(4290720,500,15,"Response did not contain valid MachineId [ConnectionUrl and/or QueryString] for [{0}]; IsRtcEnabled:{1}; IsQueryStringEmpty:{2}; IsConnectionStringEmpty:{3}",f.g,o.c,!o.a,!o.b)}else t.FindSessionFailureReason="FindSessionTranslateServerResponseFailed",Diag.a.a(8745097,500,15,"Could not translate server response to findSession response for [{0}]",f.g);else t.FindSessionFailureReason="FindSessionDeserializeServerResponseFailed",Diag.a.a(7372827,500,10,"Could not deserialize response data for [{0}]",f.g);f.P(t,u);r(null)}},Q:function(n,t,i,r){var u=this;return function(f){var e;AppRealtimeChannel.b.a().d(0,1,!1);n&&n.a();u.p=!1;u.N(f.b,!1,t);var s=null,h="unknown",o="unknown";f.b&&(e=f.b.d,e&&("RtcErrorCode"in e&&(s=e.RtcErrorCode.toString()),"RtcGracefulShutdownInProgress"in e&&(u.p=!0)),h=Common.bY.toString(f.b.c),o=f.b.b.toString());t.FindSessionFailureReason="FindSessionRequestFailed";t.HttpErrorCode=o;t.HttpErrorStatus=h;t.RtcErrorCode=s;t.RtcGracefulShutdownInProgress=u.p.toString();Diag.a.a(4290721,500,15,"Request for MachineId failed with Status='{0}'; HttpStatus='{1}' for [{2}]; RtcErrorCode='{3}', RtcGracefulShutdownInProgress='{4}. Polling: '{5}' '",h,o,u.g,s,u.p,r);u.P(t,r);i(o)}},M:function(n,t,i){var e=this.t,o,u,f,r,s,h,c,l;if(this.m&&this.m!==""&&(e=String.format("{0}&{1}={2}",e,"rr",this.m)),o=this.z+"?"+e,u=null,Diag.a.a(4317445,500,50,"Getting MachineId from server for [{0}]",this.g),f={},f["X-CorrelationId"]=Common.y.a().a,i&&(f.FSType="polling"),r={},r.IsNetworkOfflineBeforeSendRequest=this.j.f(),r.HasAvailableConnectionsBeforeSendRequest=this.j.t(),r.MaxConnectionsAllowed=this.j.l(),r.IsRefreshMachineId=i,this.k&&!this.u){s=this.R(null,r,n,t,i);h=this.Q(null,r,t,i);this.U(s,h);this.u=!0;return}this.v&&(u=this.v.a("WebServiceCall","GetMachineIdFromTheServer"));AppRealtimeChannel.a.a&&AppRealtimeChannel.a.a.a(2,0);AppRealtimeChannel.b.a().d(0,0,!1);c=this.j.d(o,1,null,f,["RtcErrorCode","RtcGracefulShutdownInProgress"],!1,1,this.R(u,r,n,t,i),this.Q(u,r,t,i),null,null,!1,null,this.r,"3",null,this.y,null,!1,null,null);c<0&&(this.o>5&&this.o<200&&Diag.a.a(578166985,500,15,"FindSession request not scheduled due to expired token. Manually triggered failure callback {0} times.",this.o),l=this,window.setTimeout(function(){l.o++;t("-1")},1e3))},N:function(n,t,i){i||(i={});i.IsNetworkOfflineAfterRequestComplete=this.j.f();i.IsRequestSucceeded=t;n&&(i.EnqueueTime=n.n,i.InvokedTime=n.g,i.CompletedTime=n.i,n.d&&"X-CorrelationId"in n.d&&(i.CorrelationId=n.d["X-CorrelationId"]));Diag.a.a(38633565,500,t?50:15,AppRealtimeChannel.c.a(i))},P:function(n,t){n||(n={});n.ConnectionState=Common.dJ.toString(this.s);t||this.l.d(1,n)}};AppRealtimeChannel.a=function(n){this.m=Function.createDelegate(this,this.n);this.k=n;this.p();this.e=!1;this.f=!1;this.c=!1;this.d=0};AppRealtimeChannel.a.b=function(n){return AppRealtimeChannel.a.a||(AppRealtimeChannel.a.a=new AppRealtimeChannel.a(n)),AppRealtimeChannel.a.a};AppRealtimeChannel.a.prototype={c:!1,i:null,h:null,j:0,b:null,k:null,e:!1,f:!1,g:0,l:0,d:0,s:function(n){this.l=n;window.setInterval(this.m,n);this.g=(new Date).getTime()},a:function(n,t){(!this.r(n)||this.f)&&(this.c||window.navigator.onLine&&!this.k.f()&&(this.b[n][t]++,this.e=!0))},p:function(){var n,t;for(this.b=new Array(3),n=0;n<3;n++)for(this.b[n]=new Array(7),t=0;t<7;t++)this.b[n][t]=0},o:function(){for(var t,r,n={},i=0;i<3;i++)for(t=0;t<7;t++)this.q(i,t)&&(r=AppRealtimeChannel.ApiType.toString(i)+AppRealtimeChannel.EventCountType.toString(t),n[r]=this.b[i][t]);return n.FSDomain=this.i,n.ConnectionDomain=this.h,n.FSRetryInterval=this.j,n.LogNumber=this.d,this.d===1&&(n.FSLatencies=AppRealtimeChannel.b.a().m(),n.ConLatencies=AppRealtimeChannel.b.a().l()),n},q:function(n,t){return n===2&&t!==3&&t?!1:!0},r:function(n){return n===2?!1:!0},n:function(){var i,r,n,t;if(this.e){for(this.d++,i=(new Date).getTime(),i-this.g<5e3+this.l&&(r=Common.O.b(this.o()),Diag.a.a(50644352,500,15,r)),this.g=(new Date).getTime(),n=0;n<3;n++)for(t=0;t<7;t++)this.b[n][t]=0;this.e=!1}}};AppRealtimeChannel.q=function(n,t,i,r,u,f,e,o,s,h,c,l){this.Q=Function.createDelegate(this,this.bh);this.Z=Function.createDelegate(this,this.be);this.L=Function.createDelegate(this,this.bf);this.T=Function.createDelegate(this,this.bd);this.R=Function.createDelegate(this,this.bi);this.V=Function.createDelegate(this,this.bs);this.U=Function.createDelegate(this,this.br);this.W=Function.createDelegate(this,this.bt);this.ba=Function.createDelegate(this,this.by);this.X=Function.createDelegate(this,this.bu);this.Y=Function.createDelegate(this,this.bv);this.S=Function.createDelegate(this,this.J);this.t=new($$sc.v.$$($$sc.q.$$(AppRealtimeChannel.l,AppRealtimeChannel.q.b)));this.H=new Date(0).getTime();this.z=n;this.E=t;this.u=0;this.D=r;this.F=o;this.B=e;this.s=s;this.O=u;this.A=f;this.w=i;this.y=h;this.G=c;this.N=l;this.M=Math.random()*100<1};AppRealtimeChannel.q.c=function(n,t,i,r,u,f,e,o,s,h,c,l){return AppRealtimeChannel.q.a.b(n,t,i,r,u,f,e,o,s,h,l,c)};AppRealtimeChannel.q.prototype={z:null,I:!1,x:null,u:0,G:null,O:null,C:1,v:null,E:null,D:null,P:0,F:null,A:null,B:null,w:null,y:null,N:null,s:null,bo:function(){this.s.m(this.S);this.s.u(this.Y);this.s.t(this.X);this.N.h(this.y);var n=this;Common.a.cm(function(){n.y.j();AppRealtimeChannel.a.a&&AppRealtimeChannel.a.a.n()});this.bc();this.bk();this.s.r(this.ba)},bk:function(){var n,i,r,t;try{if(n=$.signalR,!n)throw Error.invalidOperation("Failed to retrieve Signalr object");if(i=n.version,!i)throw Error.invalidOperation("Signalr object is missing version information");if(i!=="2.1.1")return;if(r=n.transports,!r)throw Error.invalidOperation("Failed to retrieve transports object");if(t=r.longPolling,!t)throw Error.invalidOperation("Failed to retrieve longPolling object");if(!t.supportsKeepAlive)throw Error.invalidOperation("LongPolling object does not have a field called supportsKeepAlive");t.supportsKeepAlive=this.bj()}catch(u){Diag.a.a(6432339,500,15,"Failed to disable longPolling KeepAlives: {0}",u.message)}},bj:function(){var n=this;return function(){return!1}},bc:function(){var t=++this.C,n;this.H=new Date(0).getTime();this.v=this.O();this.s.C(this.v);n=this;this.v.stateChanged(function(i){n.bq(i,t)});this.v.connectionSlow(this.W);this.v.error(this.U);this.v.log=this.V},bf:function(n,t){return n!==this.C?(Diag.a.a(4309017,500,15,"ConnectionToken verification failed for {0}",t),!1):!0},j:function(){this.u!==2&&this.u!==1&&(Diag.a.a(4539721,500,50,"Starting a new RTC connection for client [{0}]",this.w),this.F.a(),AppRealtimeChannel.b.a().n(),this.K(1,this.u),this.be())},be:function(){var n=this.C;this.I=!1;this.y.d();this.A.d(this.R,this.T,this.B.w,this.L,n)},bd:function(n){this.y.f();var t=null;n&&((t=n.toLowerCase())==="documentsessiondeleted"||t==="documentsessionexpired")?(Diag.a.a(41788292,500,15,"In RealtimeChannel method OnFailureToConnect: Disconnect was called for [{0}], due to non-retriable RtcErrorCode:{1}",this.w,n),this.k()):this.J(null,null)},J:function(n,t){var i,r,u;Diag.a.a(4309018,500,50,"Disconnecting the connection [{0}]",this.x);i=this.u===2||this.u===1;i=i&&!this.B.f;r=!0;u=0;t&&Object.getType(t)!==Object.getType(Sys.EventArgs.Empty)&&t.a&&t.a!==""&&(i=!0,this.A.f(t.a),r=t.d,u=t.b);i&&this.K(1,this.u);++this.C;this.B.C();this.bx(r);this.A.b();this.bc();i&&window.setTimeout(this.Z,Math.min(u,3e4))},by:function(){var n=null,t,i,r=(i=this.A.a(t={val:n}),n=t.val,i);this.v.qs=r;Diag.a.a(40768457,500,50,"Connection parameters refresh finished for client [{0}], CorrelationId:{1}",this.w,n)},bi:function(n){var t,f,e,r,u;this.H=(new Date).getTime();t=null;this.v.qs=(e=this.A.a(f={val:t}),t=f.val,e);this.G.b()&&(this.v.url=n,AppRealtimeChannel.a.a&&(AppRealtimeChannel.a.a.h=Common.k.i(n)));r=null;this.D&&(r=this.D.a("WebServiceCall","ConnectToServer"));Diag.a.a(3290048,500,50,"Connecting to server for client [{0}]",this.w);u={};this.E&&(u.transport=this.E.length===1?this.E[0]:this.E);u.pingInterval=null;AppRealtimeChannel.b.a().d(1,0,!1);var o=this,i=this,s=this;this.v.start(u,null).done(function(n){o.y.g();AppRealtimeChannel.b.a().d(1,1,!0);Diag.a.a(3457857,500,50,"Successfully connected to server using connection [{0}], CorrelationId:{1}",n.id,t)}).fail(function(n){Diag.a.a(3457858,500,15,"Failed to connect to server : connection string: {0}, CorrelationId:{1}, callback parameter:{2} for [{3}]",i.A.c(),t,AppRealtimeChannel.c.a(n),i.w);i.bd(null);i.y.e(n);AppRealtimeChannel.b.a().d(1,1,!1);i.s.d(0,{CorrelationId:t,ErrorDetails:n,ConnectionState:Common.dJ.toString(i.u)})}).always(function(){r&&r.a();AppRealtimeChannel.a.a&&(AppRealtimeChannel.a.a.c=!1)})},k:function(){if(!this.u){Diag.a.a(36545632,500,50,"Disconnect for [{0}] was called but the channel is already Disconnected",this.w);return}this.y.h();AppRealtimeChannel.a.a&&(AppRealtimeChannel.a.a.c=!0);Diag.a.a(36545633,500,50,"Starting explicit disconnect for [{0}]",this.w);this.B.f=!0;this.F.b();this.K(0,this.u);this.J(null,null);this.B.f=!1},bx:function(n){var t=this.bg(),f=this.v,i=this.x,r=this,u=function(){if(r.I)Diag.a.a(591692192,500,15,"Stop connection was called twice, possibly on the same connection.");else try{r.I=!0;f.stop(!0,n)}catch(t){Diag.a.a(591692191,500,15,"Stopping connection failed: {0}",t.message)}};t>0?(Diag.a.a(4309020,500,50,"Waiting to stop connection [{0}]: [{1}] ms.",i,t),window.setTimeout(u,t)):(Diag.a.a(36804372,500,50,"Stopping connection [{0}].",i),u())},bg:function(){var n=0;return this.v.state||(n=this.H+15e3-(new Date).getTime(),n<0&&(n=0)),n},a:function(){return this.u},n:function(n){this.s.b(n)},g:function(n){this.s.I(n)},q:function(n){return this.bw(0,n)},bw:function(n,t){var i=new($$sc.D.$$(Object));return this.s.e(n,t,i),i.a},e:function(n){this.s.k(n)},h:function(n){this.s.J(n)},l:function(n){return this.t.c(n)&&this.t.a(n).d(0)?this.t.a(n).a(0).a:null},o:function(){return this.bm(0)},bm:function(n){for(var i={},r=this.t.$$ge(),t;r.$$mn();)t=r.$$cu(),t.a.d(n)&&(i[t.b]=t.a.a(n).a);return i},bv:function(n,t){for(var u=t.b.$$ge(),i,r;u.$$mn();)i=u.$$cu(),this.t.c(i.b)||this.t.b(i.b,new($$sc.q.$$(AppRealtimeChannel.l,AppRealtimeChannel.q.b))),r=i.a,this.t.a(i.b).b(t.a,new AppRealtimeChannel.q.b(r.Presence,new Date(r.TimeStamp))),i.b!==this.z||t.a||this.s.y(r.Presence)},bu:function(n,t){for(var u,r=t.a,f=r.length,i=0;i<f;++i)u=r[i],this.t.d(u)},bl:function(){var n=new($$sc.q.$$(AppRealtimeChannel.l,Object)),t,i;if(!this.t.c(this.z))return n;for(t=this.t.a(this.z).$$ge();t.$$mn();)i=t.$$cu(),n.b(i.b,i.a.a);return n},r:function(n,t,i){var r=new($$sc.D.$$(Object));return this.s.E(n,t,i,r),r.a},f:function(n){this.s.s(n)},i:function(n){this.s.K(n)},m:function(n){var i,t,r,u,f,e;return!(u=this.t.f(n,r={val:i},null),i=r.val,u)||!(e=i.e(0,f={val:t},null),t=f.val,e)?null:new Common.hV(this.bn(t),t.b)},p:function(){for(var t={},i=this.t.$$ge(),n,r,u,f;i.$$mn();)n=i.$$cu(),(f=n.a.e(0,u={val:r},null),r=u.val,f)&&(t[n.b]=this.m(n.b));return t},b:function(){return this.z},M:!1,bq:function(n,t){this.bf(t,"StateChangedSignalR")&&this.K(this.bb(n.newState),this.bb(n.oldState))},K:function(n,t){var r,i,u;if((this.u!==1||t||n!==1)&&this.u!==t&&(r=String.format.apply(null,["Unexpected connection state change : Current state is '{0}' while the event indicates ('{1}'->'{2}') transition"].concat([this.u,t,n])),Diag.a.a(3290053,500,10,r)),this.u!==n){switch(n){case 2:AppRealtimeChannel.a.a&&(AppRealtimeChannel.a.a.f=!0);this.x=this.v.id;Diag.a.a(3249539,500,50,"Established connection [{0}] for client [{1}]",this.x,this.w);this.bp(this.v);Diag.a.a(4298369,500,50,"Retrieving complete session state");i=null;this.D&&(i=this.D.a("WebServiceCall","Receive First Presence"));u=this.C;this.s.B(this.L,u,this.F,this.Q,this.bl(),i);break;case 1:t===2&&Diag.a.a(4298644,500,50,"Lost connection [{0}] to the server ...trying to re-establish it",this.x);break;case 0:if(this.B.f)Diag.a.a(3249543,500,50,"Connection [{0}] has been explicitly closed",this.x);else{t===1&&(Diag.a.a(7672737,500,50,"Signalr detected an unexpected disconnect event while attempting to re-establish connection [{0}]. Kicking off global reconnect logic ...",this.x),this.y.i());t===2&&Diag.a.a(36574532,500,50,"Signalr detected a disconnect event triggered by a period of client inactivity for connection [{0}]. Kicking off global reconnect logic ...",this.x);this.J(null,null);return}}this.u=n;this.s.v(n,t)}},bp:function(n){if(!n||!n.transport||!n.transport.name){Diag.a.a(4290722,500,10,"Transport protocol name is missing");return}var t=n.transport.name,i=t.toLowerCase(),r="Transport name - {0} for [{1}]";i==="websockets"?Diag.a.a(4290723,500,50,r,t,this.w):i==="serversentevents"?Diag.a.a(4290752,500,50,r,t,this.w):i==="foreverframe"?Diag.a.a(4290753,500,50,r,t,this.w):i==="longpolling"?Diag.a.a(4290754,500,50,r,t,this.w):i==="mocktransport"||Diag.a.a(4290755,500,15,"Unknown transport protocol encountered - '{0}'",t)},bt:function(){Diag.a.a(3249544,500,50,"Detected that the connection [{0}] is slow",this.x)},br:function(n){Diag.a.a(3249545,600,10,"SignalR ERROR for connection [{0}]: {1}",this.x,AppRealtimeChannel.c.a(n)||"<empty>")},bs:function(n){var t=AppRealtimeChannel.c.a(n);this.M&&this.P<2e3&&!t.startsWith("Invok")&&!t.startsWith("Trigger")&&(Diag.a.a(578950464,500,50,"SignalR lib: {0}",t),this.P++)},bh:function(){var n,t=new Array(0),u,f,i,e,s;for((f=this.t.f(this.z,u={val:n},null),n=u.val,f)&&this.t.d(this.z),i=this.t.i().$$ge();i.$$mn();)e=i.$$cu(),Array.add(t,e);for(var o=t,h=o.length,r=0;r<h;++r)s=o[r],this.t.d(s);n&&this.t.b(this.z,n);this.s.x(t)},bb:function(n){switch(n){case 0:return 1;case 2:return 1;case 1:return 2;case 4:return 0;default:throw Error.argumentOutOfRange("state",n,"Unknown SignalR state");}},bn:function(n){if(!n||!n.b)return 1;var t=new Date;return t.getTime()-n.b.getTime()>(this.G.d()?6e4:this.G.c())?2:1}};AppRealtimeChannel.q.b=function(n,t){this.a=n;this.b=t};AppRealtimeChannel.q.b.prototype={a:null,b:null};AppRealtimeChannel.q.a=function(){};AppRealtimeChannel.q.a.b=function(n,t,i,r,u,f,e,o,s,h,c){var l=AppRealtimeChannel.m.a(Common.a.a),w=Common.a.o?Common.a.o:"1.0",a=AppRealtimeChannel.q.a.c(n,t,f,w),b=l.e()?AppRealtimeChannel.e.b(a):new AppRealtimeChannel.A,y=AppRealtimeChannel.a.b(r),v,k,p;l.i()&&y.s(l.j());v="";v=o&&o!==""?o:"/rtc2/";y.i=Common.k.i(v);var g=v+"signalr",nt=v+"findsession",tt="realtimeChannelHub",it=new AppRealtimeChannel.K,rt=function(){return $.hubConnection(g)},ut=function(n){return new AppRealtimeChannel.B(n.createHubProxy(tt))};h=h||AppRealtimeChannel.f.b();k=new AppRealtimeChannel.G(l,new AppRealtimeChannel.L(it),n,a,ut,e,h,b,y);s||(p=AppRealtimeChannel.g.a(t,r,nt,e,w,f,n,a,h,u,c),p.y=l.f(),s=p);s.e(l.g());var ft=new AppRealtimeChannel.j(a),et=i?i.split(","):null,d=new AppRealtimeChannel.q(n,et,a,e,rt,s,k,ft,h,b,l,r);return d.bo(),d};AppRealtimeChannel.q.a.c=function(n,t,i){return String.format("ClientID={0}, App={1}, ClientType={2}, SessionId={3}",n,AppRealtimeChannel.q.a.a(AppRealtimeChannel.r.toString(i)),AppRealtimeChannel.q.a.a(AppRealtimeChannel.s.toString(1)),t)};AppRealtimeChannel.q.a.a=function(n){return n?n.charAt(0).toLocaleUpperCase()+n.substring(1,n.length):n};AppRealtimeChannel.e=function(){};AppRealtimeChannel.e.b=function(n){return AppRealtimeChannel.e.a||(AppRealtimeChannel.e.a=new AppRealtimeChannel.e,Diag.a.a(39321870,500,50,"RealtimeChannelMetrics initialized for client {0}",n)),AppRealtimeChannel.e.a};AppRealtimeChannel.e.prototype={B:0,s:0,G:0,E:0,F:0,J:0,I:0,H:0,n:null,t:null,v:null,o:null,p:null,m:null,w:null,y:null,x:null,q:null,z:null,u:null,C:0,K:0,r:0,A:0,d:function(){this.B++;this.v=new Date;this.n||(this.n=new Date)},g:function(){this.s++;this.m=new Date;this.t||(this.t=this.m);this.q=this.m;this.M()},f:function(){this.G++;this.w=new Date},i:function(){this.E++;this.o=new Date},h:function(){this.F++;this.p=new Date},c:function(){this.y=new Date;this.J++},b:function(){this.u||(this.u=new Date);this.I++},a:function(){this.x=new Date;this.H++},D:!1,j:function(){if(!this.D&&this.B){var n=this.L();Diag.a.a(39321871,500,15,Common.O.b(n));this.D=!0}},e:function(n){var t,i,r,u,f,e;AppRealtimeChannel.c.d(n,u={val:t},f={val:i},e={val:r});t=u.val;i=f.val;r=e.val;t&&t!==200&&(Diag.a.a(40157596,500,15,Common.O.b({HttpErrorCode:t,HttpErrorStatus:i,Exception:r})),t>=400&&t<=499&&this.C++,t>=500&&t<=599&&this.K++)},k:function(){this.z=new Date},l:function(){this.q=new Date;this.o=this.q},L:function(){return{numberOfConnectionAttempts:this.B,numberOfSuccessfulConnections:this.s,numberOfFailedConnections:this.G,numberOfDisconnectedConnections:this.E,numberOfExplicitDisconnectedConnections:this.F,numberOfSentMessages:this.J,numberOfReceivedMessages:this.I,numberOfLostMessages:this.H,firstConnectionAttempt:this.n?this.n:null,firstMessageReceived:this.u?this.u:null,firstConnectionSuccess:this.t?this.t:null,lastConnectionAttempt:this.v?this.v:null,lastConnectionSuccess:this.m?this.m:null,lastConnectionFailure:this.w?this.w:null,lastMessageSent:this.y?this.y:null,lastMessageLost:this.x?this.x:null,lastDisconnect:this.o?this.o:null,lastExplicitDisconnect:this.p?this.p:null,lastTimeOnline:this.q?this.q:null,lastTimeOffline:this.z?this.z:null,maxDisconnectedTimeMs:this.r,maxExplicitDisconnectedTimeMs:this.A,clientConnectionErrors:this.C,serverConnectionErrors:this.K}},M:function(){this.n&&this.s===1&&(this.r=Math.max(this.r,this.m.getTime()-this.n.getTime()));this.o&&this.s>1&&(this.r=Math.max(this.r,this.m.getTime()-this.o.getTime()));this.p&&this.s>1&&(this.A=Math.max(this.A,this.m.getTime()-this.p.getTime()))}};AppRealtimeChannel.A=function(){};AppRealtimeChannel.A.prototype={d:function(){},g:function(){},f:function(){},i:function(){},h:function(){},c:function(){},b:function(){},a:function(){},j:function(){},e:function(){},k:function(){},l:function(){}};AppRealtimeChannel.B=function(n){this.l=n};AppRealtimeChannel.B.prototype={l:null,c:function(n){this.l.on("presenceUpdated",n)},d:function(n){this.l.on("updateNotification",n)},b:function(n){this.l.on("persistentStateUpdated",n)},a:function(n){this.l.on("persistentStateCleared",n)},g:function(n){this.l.off("presenceUpdated",n)},h:function(n){this.l.off("updateNotification",n)},f:function(n){this.l.off("persistentStateUpdated",n)},e:function(n){this.l.off("persistentStateCleared",n)},j:function(n,t){return this.l.invoke("SendUpdateNotification",n,t)},i:function(n){return this.l.invoke("GetCompletePersistentStateWithMetadata",n)},k:function(n,t){return this.l.invoke("UpdatePersistentState",n,t)}};AppRealtimeChannel.m=function(){};AppRealtimeChannel.m.a=function(n){var i,t;return n?(t=new AppRealtimeChannel.m,t.s=n.a("AwayStatusManagerIsEnabled"),t.n=n.a("AwayStatusOneMinuteTimeoutIsEnabled"),t.m=n.c("AwayCoauthorThresholdMs",9e5),t.l=n.a("RtcAllowCrossDomainAccessEnabled"),t.u=n.c("RTCReconnectionSlowDurationMilliseconds",5e3),t.q=n.a("RTCLogUpdateNotificationHintOnDeserializationFailure"),t.r=n.a("ShouldLogOnContentNotification"),t.o=n.a("RtcClientMetricsEnabled"),t.p=n.c("RtcFindSessionRequestTimeoutInMS",6e4),t.v=n.a("RtcJsClientFrequentlyLogsMetrics"),t.w=n.c("RtcJsClientFrequentMetricsLatencyThresholdInMS",1e3),t.x=n.c("RtcJsClientFrequentMetricsLogIntervalInMS",3e5),t.t=n.a("RtcSynchronousNotifyIsEnabled"),t):(i=new AppRealtimeChannel.m,i.s=!1,i.n=!1,i.m=9e5,i.l=!1,i.u=5e3,i.q=!0,i.r=!1,i.o=!1,i.p=9e4,i)};AppRealtimeChannel.m.prototype={s:!1,n:!1,d:function(){return this.n},m:0,c:function(){return this.m},l:!1,b:function(){return this.l},u:0,q:!1,h:function(){return this.q},r:!1,k:function(){return this.r},o:!1,e:function(){return this.o},p:0,g:function(){return this.p},v:!1,i:function(){return this.v},w:0,a:function(){return this.w},x:0,j:function(){return this.x},t:!1,f:function(){return this.t}};AppRealtimeChannel.f=function(){this.L=new Common.ba};AppRealtimeChannel.f.b=function(){return AppRealtimeChannel.f.a||(AppRealtimeChannel.f.a=new AppRealtimeChannel.f)};AppRealtimeChannel.f.prototype={L:null,v:function(n,t){this.L.k("CSC",new Common.go(n,t),null)},C:function(n){this.L.k("RP",new AppRealtimeChannel.E(n),null)},a:function(n){this.L.k("RC",n,null)},D:function(){this.L.k("RMID",null,null)},B:function(n,t,i,r,u,f){this.L.k("RPS",new AppRealtimeChannel.C(n,t,i,r,u,f),null)},f:function(n,t){this.L.k("UPSR",new AppRealtimeChannel.N(n,t),null)},c:function(n,t){this.L.k("PU",new Common.fH(n,t),null)},y:function(n){this.L.k("MPU",new Common.hj(n),null)},E:function(n,t,i,r){return this.L.k("SUN",new AppRealtimeChannel.t(n,t,i,r),null)},G:function(n,t){this.L.k("UNR",new Common.hU(n,t),null)},e:function(n,t,i){return this.L.k("SP",new AppRealtimeChannel.H(n,t,i),null)},A:function(n,t){this.L.k("PSU",new Common.hy(n,t),null)},z:function(n){this.L.k("PSC",new Common.fF(n),null)},x:function(n){this.L.k("IPSC",new Common.fF(n),null)},H:function(n){this.L.k("UPSC",new AppRealtimeChannel.M(n),null)},F:function(n,t){this.L.k("SPC",new AppRealtimeChannel.I(n,t),null)},d:function(n,t){this.L.k("RCF",new AppRealtimeChannel.F(n,t),null)},w:function(n){this.L.k("CPSWM",new AppRealtimeChannel.x(n),null)},b:function(n){this.L.m("CSC",n)},I:function(n){this.L.n("CSC",n)},n:function(n){this.L.m("RP",n)},m:function(n){this.L.m("RC",n)},o:function(n){this.L.m("RMID",n)},l:function(n){this.L.m("RPS",n)},u:function(n){this.L.m("UPSR",n)},k:function(n){this.L.m("PU",n)},J:function(n){this.L.n("PU",n)},i:function(n){this.L.m("IPU",n)},q:function(n){this.L.m("SUN",n)},j:function(n){this.L.m("IUNR",n)},s:function(n){this.L.m("UNR",n)},K:function(n){this.L.n("UNR",n)},h:function(n){this.L.m("IPSU",n)},g:function(n){this.L.m("IPSC",n)},t:function(n){this.L.m("UPSC",n)},p:function(n){this.L.m("SP",n)},r:function(n){this.L.m("SPC",n)}};AppRealtimeChannel.H=function(n,t,i){AppRealtimeChannel.H.initializeBase(this);this.a=n;this.b=t;this.c=i};AppRealtimeChannel.H.prototype={a:0,b:null,c:null};AppRealtimeChannel.t=function(n,t,i,r){AppRealtimeChannel.t.initializeBase(this);this.c=n;this.d=t;this.a=i;this.b=r};AppRealtimeChannel.t.prototype={c:0,d:null,a:!1,b:null};AppRealtimeChannel.E=function(n){AppRealtimeChannel.E.initializeBase(this);this.a=n};AppRealtimeChannel.E.prototype={a:null};AppRealtimeChannel.C=function(n,t,i,r,u,f){AppRealtimeChannel.C.initializeBase(this);this.d=n;this.a=t;this.f=i;this.b=u;this.e=r;this.c=f};AppRealtimeChannel.C.prototype={c:null,b:null,e:null,f:null,a:0,d:null};AppRealtimeChannel.N=function(n,t){AppRealtimeChannel.N.initializeBase(this);this.a=n;this.b=t};AppRealtimeChannel.N.prototype={a:0,b:null};AppRealtimeChannel.M=function(n){AppRealtimeChannel.M.initializeBase(this);this.a=n};AppRealtimeChannel.M.prototype={a:null};AppRealtimeChannel.D=function(n,t,i,r){AppRealtimeChannel.D.initializeBase(this);this.a=n;this.b=t;this.c=i;this.d=r};AppRealtimeChannel.D.prototype={a:null,b:0,c:null,d:!1};AppRealtimeChannel.I=function(n,t){AppRealtimeChannel.I.initializeBase(this);this.a=n;this.b=t};AppRealtimeChannel.I.prototype={a:!1,b:!1};AppRealtimeChannel.F=function(n,t){AppRealtimeChannel.F.initializeBase(this);this.b=n;this.a=t};AppRealtimeChannel.F.prototype={b:0,a:null};AppRealtimeChannel.x=function(n){AppRealtimeChannel.x.initializeBase(this);this.a=n};AppRealtimeChannel.x.prototype={a:null};AppRealtimeChannel.G=function(n,t,i,r,u,f,e,o,s){this.s=Function.createDelegate(this,this.N);this.p=Function.createDelegate(this,this.K);this.q=Function.createDelegate(this,this.v);this.r=Function.createDelegate(this,this.M);this.I=Function.createDelegate(this,this.bb);this.D=Function.createDelegate(this,this.S);this.E=Function.createDelegate(this,this.T);this.G=Function.createDelegate(this,this.V);this.F=Function.createDelegate(this,this.U);this.J=Function.createDelegate(this,this.O);this.H=Function.createDelegate(this,this.X);this.o=new($$sc.q.$$(AppRealtimeChannel.i,Object));AppRealtimeChannel.G.initializeBase(this,[e]);this.i=n;this.m=0;this.n=0;this.h=t;this.h.a(this.z);this.l=i;this.u=u;this.a.n(this.y);this.a.l(this.H);this.a.q(this.J);this.a.i(this.F);this.a.j(this.G);this.a.h(this.E);this.a.g(this.D);this.a.p(this.I);this.j=f;this.d=r;this.c=o;this.b=s};AppRealtimeChannel.G.prototype={i:null,e:null,m:0,n:0,t:!1,l:null,u:null,j:null,k:0,d:null,c:null,b:null,B:function(n,t){this.e=this.u(t.a);this.h.d();this.e.c(this.r);this.e.b(this.q);this.e.a(this.p);this.e.d(this.s)},A:function(n,t){this.g=t.a;t.a===2&&this.ba()},ba:function(){for(var t=this.o.$$ge(),n;t.$$mn();)n=t.$$cu(),this.O(null,new AppRealtimeChannel.t(n.b,n.a,!1,new($$sc.D.$$(Object))));this.o=new($$sc.q.$$(AppRealtimeChannel.i,Object))},X:function(n,t){t.e();for(var i=0;i<2;++i)this.Z(i,t)},Z:function(n,t){try{var i=this,r=this,f=this;this.e.i(n).done(function(r){t.d(t.a,"GetCompletePresenceSuccess")&&(t.f.c(),Diag.a.a(3249540,500,50,"Successfully retrieved complete session state for [{0}]",i.d),i.a.D(),i.W(n,r),i.a.w(r),t.b.d(n)&&i.a.e(n,t.b.a(n),new($$sc.D.$$(Object))))}).fail(function(n){t.d(t.a,"GetCompletePresenceFail")&&(Diag.a.a(3249541,500,15,"Failed to retrieve complete session state : {0} for [{1}]",AppRealtimeChannel.c.a(n),r.d),r.a.a(null))}).always(function(){t.c&&t.c.a()})}catch(u){Diag.a.a(595132428,500,10,"Exception thrown while calling hub method GetCompletePersistentStateWithMetadata. Promise not even created. Current event token: {0}, Exception message: {1}",t.a,u.message)}},bb:function(n,t){var u=t.b,s=AppRealtimeChannel.c.b(u),f=t.c,e=new($$sc.v.$$(Common.PresenceDataEntryForClients)),i,r,v;if(e.b(this.l,(i=new Common.PresenceDataEntryForClients,i.Presence=u,i.TimeStamp=(new Date).getTime(),i)),this.a.f(t.a,e),this.b.a(1,0),this.g!==2){this.c.a();this.b.a(1,2);f.b(null);return}r=this.k.toString();++this.k;var h=this,c=new AppRealtimeChannel.p(function(){return h.bc(t.a,s,r)},r),l=this.P(0,t.a),o=l.b(c),a=this;o.c(function(n){n===2&&a.b.a(1,6);f.b(null)});v=this;o.b(function(){})},bc:function(n,t,i){var o=null,f=new AppRealtimeChannel.u,r=new AppRealtimeChannel.h;if(Diag.a.a(3249501,500,50,"Sending presence update for [{0}]",this.d),this.g!==2)return this.c.a(),this.b.a(1,2),Diag.a.a(7934171,500,15,"Connection is lost - unable to send the message for [{0}]",this.d),r.d(),r;this.j&&this.m<20&&(o=this.j.a("WebServiceCall","Send Presence Message"),this.m++);f.d();r.e(1);try{var u=this,e=this,h=this;this.e.k(n,t).done(function(){u.c.c();u.b.a(1,1);Diag.a.a(3249502,500,50,"Successfully delivered presence update message [{0}] for [{1}]",i,u.d);r.a(1);f&&(f.e(),f.c()>u.i.a()?u.b.a(1,4):u.b.a(1,5))}).fail(function(n){e.f||(e.c.a(),e.b.a(1,3),Diag.a.a(3249503,500,15,"Server failed to process the presence update message [{0}]: [{1}] for [{2}]",i,AppRealtimeChannel.c.a(n),e.d));r.a(2)}).always(function(){o&&o.a()})}catch(s){Diag.a.a(593072906,500,15,"Exception when invoking hub method UpdatePersistentState, error: {1}",s.message);this.b.a(1,3);r.a(2)}return r},O:function(n,t){var i=t.c,u=t.d,o=t.a,f=t.b,s=AppRealtimeChannel.c.b(u),r,v;if(this.b.a(0,0),this.g!==2){o?this.o.b(i,u):(this.c.a(),this.b.a(0,2));f.b(null);return}r=this.k.toString();++this.k;var h=this,c=new AppRealtimeChannel.p(function(){return h.bd(i,s,r)},r),l=this.P(1,i),e=l.b(c),a=this;e.c(function(n){n===2&&a.b.a(0,6);f.b(null)});v=this;e.b(function(){})},bd:function(n,t,i){var o=null,f=new AppRealtimeChannel.u,r=new AppRealtimeChannel.h;if(Diag.a.a(3249505,500,50,"Sending update notification for [{0}]",this.d),this.g!==2)return this.c.a(),this.b.a(0,2),Diag.a.a(7934172,500,15,"Connection is lost - unable to send the message for [{0}]",this.d),r.d(),r;this.j&&n===3&&this.n<20&&(o=this.j.a("WebServiceCall","Send WetContent Update"),this.n++);f.d();r.e(1);var u=this,e=this,s=this;return this.e.j(n,t).done(function(){u.c.c();u.b.a(0,1);Diag.a.a(3249506,500,50,"Successfully delivered update notification message [{0}] for [{1}]",i,u.d);r.a(1);f&&(f.e(),f.c()>u.i.a()?u.b.a(0,4):u.b.a(0,5))}).fail(function(n){e.f||(e.c.a(),e.b.a(0,3),Diag.a.a(3249507,500,15,"Server failed to process the update notification message [{0}] : [{1}] for [{2}]",i,AppRealtimeChannel.c.a(n),e.d));r.a(2)}).always(function(){o&&o.a()}),r},C:function(){this.e.g(this.r);this.e.f(this.q);this.e.e(this.p);this.e.h(this.s)},U:function(n,t){this.M(t.b,t.a)},M:function(n){this.c.b();this.v(0,n)},T:function(n,t){this.v(t.a,t.b)},W:function(n,t){var u={},f=t,i,r;for(i in f)r={key:i,value:f[i]},u[r.key]=r.value.Presence;this.L(n,u,t)},v:function(n,t){this.c.b();this.L(n,t,null)},L:function(n,t,i){var e,o,w,s,h,c,l,a,r,v,u,f;if(Diag.a.f(500,100)){e=t;for(o in e)w={key:o,value:e[o]}}if(delete t[this.l],!Common.O.a(t)){s=t;for(h in s)c={key:h,value:s[h]},l=c.key,t[l]=AppRealtimeChannel.c.c(c.value,"Presence",l,!1);var y=new($$sc.v.$$(Common.PresenceDataEntryForClients)),b=(new Date).getTime(),p=t;for(a in p)r={key:a,value:p[a]},v=r.key,i?(u=i[v],u.Presence=r.value):u=(f=new Common.PresenceDataEntryForClients,f.Presence=r.value,f.TimeStamp=b,f),y.b(v,u);this.a.f(n,y);n?this.a.A(n,t):(this.t||(Diag.a.a(4539734,500,50,"Raising first presence update notification for [{0}]",this.d),this.t=!0,Common.a.e&&(Common.a.e.IsCoauthSession=!0)),this.a.c(t,new Array(0)))}},S:function(n,t){this.K(t.a)},K:function(n){if(this.c.b(),Diag.a.f(500,100))for(var t=0;t<n.length;++t);n.length&&(this.a.H(n),this.a.z(n),this.a.c({},n))},V:function(n,t){this.N(t.a,t.b)},N:function(n,t){var i,r,u;if(this.i.k()&&!n&&Diag.a.a(40128990,500,100,"Received ContentUpdate notification from the server"),this.c.b(),n===5){i=this.Y(t);r=i?String.format("Received client reconnection request from the server. Reason: {0}, Backoff time: {1} ",i.c,i.b):"Received client reconnection request from the server without params.";Diag.a.a(18637071,500,50,r);this.a.a(i);return}u=AppRealtimeChannel.c.c(t,String.format("UpdateNotification-{0}",AppRealtimeChannel.i.toString(n)),null,this.i.h());this.a.G(n,u)},Y:function(n){try{if(!n||n==="")return null;var t=JSON.parse(n);return new AppRealtimeChannel.D(t.rr,t.rbp,t.rd,t.sa)}catch(i){return Diag.a.a(593844380,500,15,"Error when parsing reconnect hint: {0}",i.message),null}},P:function(n,t){return this.h.b(n+","+t)}};AppRealtimeChannel.c=function(){};AppRealtimeChannel.c.b=function(n){var t,i,r;try{t=JSON.stringify(n)}catch(u){i=String.format("Failed to JSON-serialize payload : {0}",u);Diag.a.a(18637072,500,10,i);throw Error.argument("payload",i);}if(t.length>8e3){r=String.format("Payload exceeds maximum length: {0} > {1} : {2}",t.length,8e3,t);Diag.a.a(18637074,500,10,r);throw Error.argument("payload",r);}return t};AppRealtimeChannel.c.c=function(n,t,i,r){var u,o,f,e,s,h;if(!n)return null;if(Object.getType(n)!==String){if(r)try{u=AppRealtimeChannel.c.b(n)}catch(c){u=String.format("Failed to JSON serialize the object with exception [{0}]",c)}else u="not allowed to log the object";return o=String.format("Failed to deserialize [{0}] - object is not of type [String] and is instead of type [{1}]. ExtraInfo: [{2}]. Object: [{3}].",t,Object.getType(n).getName(),i,u),Diag.a.a(18637075,500,10,o),null}f=null;e=n;try{f=JSON.parse(e)}catch(l){s=r?e:"not allowed to log the object";h=String.format("Failed to deserialize [{0}]. Exception deserializing the object : [{1}]. ExtraInfo: [{2}]. Object: [{3}]",t,l,i,s);Diag.a.a(18637077,500,10,h)}return f};AppRealtimeChannel.c.a=function(n){if(!n)return"";if(String.isInstanceOfType(n))return n.toString();try{return JSON.stringify(n)}catch(t){return n.toString()}};AppRealtimeChannel.c.d=function(n,t,i,r){var u,f,e;if(t.val=0,i.val=null,r.val=null,n)try{u=n;f=u.source;f&&Object.getType(f)===String&&(r.val=f);e=u.context;e&&(u=e,t.val=u.status?u.status:0,i.val=u.statusText?u.statusText:null)}catch(o){}};AppRealtimeChannel.u=function(){};AppRealtimeChannel.u.prototype={a:null,b:null,c:function(){return this.a?this.b?this.b.getTime()-this.a.getTime():(new Date).getTime()-this.a.getTime():0},d:function(){this.a=new Date},e:function(){this.b=new Date}};AppRealtimeChannel.h=function(){this.g=new(AppRealtimeChannel.n.$$(Common.hi));this.f=new(AppRealtimeChannel.n.$$(Common.hh))};AppRealtimeChannel.h.prototype={c:function(n){this.g.f(n)},b:function(n){this.f.f(n)},e:function(n){this.g.e(n)},a:function(n){this.f.e(n)},d:function(){this.e(2);this.a(2)},g:null,f:null};AppRealtimeChannel.n=function(){this.d=this.$$gta["AppRealtimeChannel.n"].T===Number||Type.isEnum(this.$$gta["AppRealtimeChannel.n"].T)?0:this.$$gta["AppRealtimeChannel.n"].T===Boolean?!1:null};AppRealtimeChannel.n.$$=function(n){var u=AppRealtimeChannel.__tc=AppRealtimeChannel.__tc||{},t="n$"+n.getName().replace(/\./g,"_"),i,o,f,e,r;if(!u[t]){i=u[t]=function(){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];AppRealtimeChannel.n.apply(this,t)};i.registerClass("AppRealtimeChannel.__tc."+t);o={"AppRealtimeChannel.n":{T:n},ctor:AppRealtimeChannel.n};i.prototype.$$gta=o;f=AppRealtimeChannel.n.prototype;for(e in f)r={key:e,value:f[e]},"constructor"!==r.key&&(i.prototype[r.key]=r.value)}return u[t]};AppRealtimeChannel.n.prototype={f:function(n){this.a=n;this.g()},e:function(n){this.b||(this.b=!0,this.d=n,this.g())},g:function(){this.b&&this.a&&!this.c&&(this.c=!0,this.a(this.d))},b:!1,c:!1,a:null};AppRealtimeChannel.p=function(n,t){this.b=n;this.c=t};AppRealtimeChannel.p.prototype={a:function(){return this.b()},c:null,b:null};AppRealtimeChannel.J=function(n,t){this.y=n;this.x=t;this.s=AppRealtimeChannel.J.a;this.h=this.o=this.n=0};AppRealtimeChannel.J.a=function(n,t){return window.setTimeout(n,t)};AppRealtimeChannel.J.prototype={h:0,o:0,n:0,c:function(){this.h>0&&this.n>0&&Diag.a.a(36545635,500,50,"Throttler [{0}] dropped [{1}] messages out of [{2}]",this.x,this.n,this.h);this.h>0&&this.o>0&&Diag.a.a(36545634,500,50,"Throttler [{0}] throttled [{1}] messages out of [{2}]",this.x,this.o,this.h)},y:null,g:!1,t:null,k:null,j:!1,x:null,s:null,z:function(n,t){this.o++;this.u(!0);this.g=!0;this.t=n;this.k=t},u:function(n){this.g=!1;this.k&&n&&(this.n++,this.k.d());this.t=null;this.k=null}};AppRealtimeChannel.o=function(n,t){this.l=Function.createDelegate(this,this.p);AppRealtimeChannel.o.initializeBase(this,[n,t]);this.e=new Date(0).getTime();var i=this;this.f=function(){return(new Date).getTime()}};AppRealtimeChannel.o.a=function(n,t){return new AppRealtimeChannel.o(n,t)};AppRealtimeChannel.o.prototype={i:0,e:0,f:null,d:function(n){this.j||(this.i=n,this.j=!0)},b:function(n){this.j||this.d(200);this.h++;var t=this.f(),i=new AppRealtimeChannel.h;return this.e>t&&(this.e=t),this.g?(this.u(!0),this.z(n,i)):this.e+this.i<=t?this.m(n,i):(this.z(n,i),this.s(this.l,this.e+this.i-t)),i},p:function(){if(this.g){var n=this.t,t=this.k;this.u(!1);this.m(n,t)}},m:function(n,t){var i,r,u;this.e=this.f();i=this.y(n);r=this;i.c(function(n){t.e(n)});u=this;i.b(function(n){t.a(n)})}};AppRealtimeChannel.k=function(n,t){this.D=Function.createDelegate(this,this.I);this.C=Function.createDelegate(this,this.G);this.A=new Common.ba;AppRealtimeChannel.k.initializeBase(this,[n,t]);this.l=0;this.m=[];this.p=AppRealtimeChannel.k.b};AppRealtimeChannel.k.a=function(n,t){return new AppRealtimeChannel.k(n,t)};AppRealtimeChannel.k.b=function(n){window.clearTimeout(n)};AppRealtimeChannel.k.prototype={B:0,v:0,p:null,l:0,m:null,i:!1,w:0,q:0,r:0,b:function(n){this.j||this.e(15e3,5);this.h++;var t=new AppRealtimeChannel.h;return this.g?this.z(n,t):this.l<this.v?this.E(n,t):(this.z(n,t),this.i=!1),t},E:function(n,t){var u=this.y(n),f=this.s(this.C,this.B),i,e,r;++this.l;Array.add(this.m,f);i=this.q;e=this;u.c(function(n){t.e(n)});r=this;u.b(function(n){r.q===i&&(r.F(i,f),t.a(n))})},F:function(n,t){this.q===n&&(--this.l,this.p(t),Array.remove(this.m,t),this.g&&this.H())},H:function(){this.g&&(this.i||(this.w=this.s(this.D,0),this.i=!0))},I:function(){if(this.i=!1,this.g){var n=this.t,t=this.k;this.u(!1);this.E(n,t)}},G:function(){++this.r;var n=Math.floor(this.v/2);this.r>n&&(this.r=-1e9,this.A.k("TMUDM",null,null))},d:function(n){this.A.m("TMUDM",n)},f:function(){var i;this.r=0;this.h=this.o=this.n=0;++this.q;for(var t=this.m,r=t.length,n=0;n<r;++n)i=t[n],this.p(i);this.l=0;this.m=[];this.u(!0);this.i&&(this.p(this.w),this.w=0,this.i=!1)},e:function(n,t){this.j||(this.B=n,this.v=t,this.j=!0)}};AppRealtimeChannel.K=function(){};AppRealtimeChannel.K.prototype={a:function(n,t){return AppRealtimeChannel.k.a(n,t)},b:function(n,t){return AppRealtimeChannel.o.a(n,t)}};AppRealtimeChannel.L=function(n){var i,t;this.j=new Common.ba;this.h=new($$sc.v.$$(AppRealtimeChannel.z));this.g=new($$sc.v.$$(AppRealtimeChannel.y));this.i=n;i=this;this.e=this.i.a(function(n){return n.a()},"GlobalMaxOustandingThrottler");t=this;this.e.d(function(){t.j.k("TMUDM",null,null)})};AppRealtimeChannel.L.prototype={i:null,h:null,g:null,e:null,f:null,k:!1,c:function(n){this.k||(this.f=n,this.e.e(this.f.a,this.f.b),this.k=!0)},b:function(n){var i,f,e,t,o,s,h,r,c,l,u;return this.k||this.c(new AppRealtimeChannel.v(200,15e3,5,1e3)),(e=this.h.f(n,f={val:i},null),i=f.val,e)||((s=this.g.f(n,o={val:t},null),t=o.val,s)||(h="MaxOutstandingThrottler-"+n,r=this.e,t=this.i.a(r.a||(r.a=Function.createDelegate(r,r.b)),h),t.e(this.f.a,this.f.c),c=this,t.d(function(){c.j.k("TMUDM",null,null)}),this.g.g(n,t)),l="MaxRateThrottler-"+n,u=t,i=this.i.b(u.a||(u.a=Function.createDelegate(u,u.b)),l),i.d(this.f.d),this.h.g(n,i)),i},d:function(){for(var i=this.h.$$ge(),r,n,t;i.$$mn();)r=i.$$cu(),r.a.c();for(n=this.g.$$ge();n.$$mn();)t=n.$$cu(),t.a.c(),t.a.f();this.e.c();this.e.f()},a:function(n){this.j.m("TMUDM",n)}};AppRealtimeChannel.v=function(n,t,i,r){this.d=n;this.a=t;this.c=i;this.b=r};AppRealtimeChannel.v.prototype={d:0,a:0,c:0,b:0};AppRealtimeChannel.b=function(){this.g=0;this.e=this.k(6);this.c=this.k(6);this.b=0;this.a=0;var n=this;this.f=function(){return new Date}};AppRealtimeChannel.b.a=function(){return AppRealtimeChannel.b.b||(AppRealtimeChannel.b.b=new AppRealtimeChannel.b),AppRealtimeChannel.b.b};AppRealtimeChannel.b.prototype={i:!1,h:null,e:null,c:null,b:0,a:0,g:0,f:null,k:function(n){for(var t=new Array(n),i=0;i<t.length;i++)t[i]=0;return t},m:function(){return this.e.toString()},l:function(){return this.c.toString()},n:function(){this.h=this.f()},d:function(n,t,i){if(!this.i){i&&(this.i=!0);var r=this.f();!n&&this.b>5||n===1&&this.a>5||(this.g<n?(this.b%2==1&&(this.e[this.b]=-1,this.b++),this.g=n,t===1&&(this.c[this.a]=-1,this.a++),this.c[this.a]=this.j(r),this.a++):n?(this.c[this.a]=this.j(r),this.a++):(this.e[this.b]=this.j(r),this.b++))}},j:function(n){var t=n.getTime()-this.h.getTime();return this.h=n,t}};AppRealtimeChannel.O.registerClass("AppRealtimeChannel.O");AppRealtimeChannel.w.registerClass("AppRealtimeChannel.w");AppRealtimeChannel.a.registerClass("AppRealtimeChannel.a");AppRealtimeChannel.q.registerClass("AppRealtimeChannel.q",null,AppRealtimeChannel.d,Common.fx);AppRealtimeChannel.q.b.registerClass("AppRealtimeChannel.q.b");AppRealtimeChannel.H.registerClass("AppRealtimeChannel.H",Sys.EventArgs);AppRealtimeChannel.t.registerClass("AppRealtimeChannel.t",Sys.EventArgs);AppRealtimeChannel.E.registerClass("AppRealtimeChannel.E",Sys.EventArgs);AppRealtimeChannel.C.registerClass("AppRealtimeChannel.C",Sys.EventArgs);AppRealtimeChannel.N.registerClass("AppRealtimeChannel.N",Sys.EventArgs);AppRealtimeChannel.M.registerClass("AppRealtimeChannel.M",Sys.EventArgs);AppRealtimeChannel.D.registerClass("AppRealtimeChannel.D",Sys.EventArgs);AppRealtimeChannel.I.registerClass("AppRealtimeChannel.I",Sys.EventArgs);AppRealtimeChannel.F.registerClass("AppRealtimeChannel.F",Sys.EventArgs);AppRealtimeChannel.x.registerClass("AppRealtimeChannel.x",Sys.EventArgs);AppRealtimeChannel.G.registerClass("AppRealtimeChannel.G",AppRealtimeChannel.O);AppRealtimeChannel.u.registerClass("AppRealtimeChannel.u");AppRealtimeChannel.h.registerClass("AppRealtimeChannel.h",null,AppRealtimeChannel.S);AppRealtimeChannel.J.registerClass("AppRealtimeChannel.J");AppRealtimeChannel.o.registerClass("AppRealtimeChannel.o",AppRealtimeChannel.J);AppRealtimeChannel.k.registerClass("AppRealtimeChannel.k",AppRealtimeChannel.J);AppRealtimeChannel.a.a=null;AppRealtimeChannel.e.a=null;AppRealtimeChannel.f.a=null;AppRealtimeChannel.b.b=null;
/*!
 * ASP.NET SignalR JavaScript Library v2.1.1-pre
 * http://signalr.net/
 *
 * Copyright Microsoft Open Technologies, Inc. All rights reserved.
 * Licensed under the Apache 2.0
 * https://github.com/SignalR/SignalR/blob/master/LICENSE.md
 *
 */
(function(n,t,i){function v(t,i){var u,f;if(n.isArray(t)){for(u=t.length-1;u>=0;u--)f=t[u],n.type(f)==="string"&&r.transports[f]||(i.log("Invalid transport: "+f+", removing it from the transports list."),t.splice(u,1));t.length===0&&(i.log("No transports remain within the specified transport array."),t=null)}else if(r.transports[t]||t==="auto"){if(t==="auto"&&r._.ieVersion<=8)return["longPolling"]}else i.log("Invalid transport: "+t.toString()+"."),t=null;return t}function y(n){return n==="http:"?80:n==="https:"?443:void 0}function h(n,t){return t.match(/:\d+$/)?t:t+":"+y(n)}function p(t,i){var u=this,r=[];u.tryBuffer=function(i){return t.state===n.signalR.connectionState.connecting?(r.push(i),!0):!1};u.drain=function(){if(t.state===n.signalR.connectionState.connected)while(r.length>0)i(r.shift())};u.clear=function(){r=[]}}var f={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if(typeof n!="function")throw new Error(f.nojQuery);var r,c,s=t.document.readyState==="complete",e=n(t),l="__Negotiate Aborted__",u={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},w=function(n,i){if(i!==!1){var r;typeof t.console!="undefined"&&(r="["+(new Date).toTimeString()+"] SignalR: "+n,t.console.debug?t.console.debug(r):t.console.log&&t.console.log(r))}},o=function(t,i,r){return i===t.state?(t.state=r,n(t).triggerHandler(u.onStateChanged,[{oldState:i,newState:r}]),!0):!1},b=function(n){return n.state===r.connectionState.disconnected},a=function(n){return n._.keepAliveData.activated&&n.transport.supportsKeepAlive(n)},k=function(i){var f,e;i._.configuredStopReconnectingTimeout||(e=function(t){var i=r._.format(r.resources.reconnectTimeout,t.disconnectTimeout);t.log(i);n(t).triggerHandler(u.onError,[r._.error(i,"TimeoutException")]);t.stop(!1,!1)},i.reconnecting(function(){var n=this;n.state===r.connectionState.reconnecting&&(f=t.setTimeout(function(){e(n)},n.disconnectTimeout))}),i.stateChanged(function(n){n.oldState===r.connectionState.reconnecting&&t.clearTimeout(f)}),i._.configuredStopReconnectingTimeout=!0)};r=function(n,t,i){return new r.fn.init(n,t,i)};r._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var i,n;return t.navigator.appName==="Microsoft Internet Explorer"&&(n=/MSIE ([0-9]+\.[0-9]+)/.exec(t.navigator.userAgent),n&&(i=t.parseFloat(n[1]))),i}(),error:function(n,t,i){var r=new Error(n);return r.source=t,typeof i!="undefined"&&(r.context=i),r},transportError:function(n,t,r,u){var f=this.error(n,r,u);return f.transport=t?t.name:i,f},format:function(){for(var t=arguments[0],n=0;n<arguments.length-1;n++)t=t.replace("{"+n+"}",arguments[n+1]);return t},firefoxMajorVersion:function(n){var t=n.match(/Firefox\/(\d+)/);return!t||!t.length||t.length<2?0:parseInt(t[1],10)},configurePingInterval:function(i){var f=i._.config,e=function(t){n(i).triggerHandler(u.onError,[t])};f&&!i._.pingIntervalId&&f.pingInterval&&(i._.pingIntervalId=t.setInterval(function(){r.transports._logic.pingServer(i).fail(e)},f.pingInterval))}};r.events=u;r.resources=f;r.ajaxDefaults={processData:!0,timeout:null,async:!0,global:!1,cache:!1};r.changeState=o;r.isDisconnecting=b;r.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4};r.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'><\/script>.");}};e.load(function(){s=!0});r.fn=r.prototype={init:function(t,i,r){var f=n(this);this.url=t;this.qs=i;this.lastError=null;this._={keepAliveData:{},connectingMessageBuffer:new p(this,function(n){f.triggerHandler(u.onReceived,[n])}),onFailedTimeoutHandle:null,lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0};typeof r=="boolean"&&(this.logging=r)},_parseResponse:function(n){var t=this;return n?typeof n=="string"?t.json.parse(n):n:n},_originalJson:t.JSON,json:t.JSON,isCrossDomain:function(i,r){var u;return(i=n.trim(i),r=r||t.location,i.indexOf("http")!==0)?!1:(u=t.document.createElement("a"),u.href=i,u.protocol+h(u.protocol,u.host)!==r.protocol+h(r.protocol,r.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:r.connectionState.disconnected,clientProtocol:"1.4",reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(i,h){var c=this,y={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},d,p=c._deferral||n.Deferred(),w=t.document.createElement("a"),b,g;if(c.lastError=null,c._deferral=p,!c.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");if(n.type(i)==="function"?h=i:n.type(i)==="object"&&(n.extend(y,i),n.type(y.callback)==="function"&&(h=y.callback)),y.transport=v(y.transport,c),!y.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");return(c._.config=y,!s&&y.waitForPageLoad===!0)?(c._.deferredStartHandler=function(){c.start(i,h)},e.bind("load",c._.deferredStartHandler),p.promise()):c.state===r.connectionState.connecting?p.promise():o(c,r.connectionState.disconnected,r.connectionState.connecting)===!1?(p.resolve(c),p.promise()):(k(c),w.href=c.url,w.protocol&&w.protocol!==":"?(c.protocol=w.protocol,c.host=w.host):(c.protocol=t.document.location.protocol,c.host=w.host||t.document.location.host),c.baseUrl=c.protocol+"//"+c.host,c.wsProtocol=c.protocol==="https:"?"wss://":"ws://",y.transport==="auto"&&y.jsonp===!0&&(y.transport="longPolling"),c.url.indexOf("//")===0&&(c.url=t.location.protocol+c.url,c.log("Protocol relative URL detected, normalizing it to '"+c.url+"'.")),this.isCrossDomain(c.url)&&(c.log("Auto detected cross domain url."),y.transport==="auto"&&(y.transport=["webSockets","serverSentEvents","longPolling"]),typeof y.withCredentials=="undefined"&&(y.withCredentials=!0),y.jsonp||(y.jsonp=!n.support.cors,y.jsonp&&c.log("Using jsonp because this browser doesn't support CORS.")),c.contentType=r._.defaultContentType),c.withCredentials=y.withCredentials,c.ajaxDataType=y.jsonp?"jsonp":"text",n(c).bind(u.onStart,function(){n.type(h)==="function"&&h.call(c);p.resolve(c)}),d=function(i,s){var y=r._.error(f.noTransportOnInit);if(s=s||0,s>=i.length){n(c).triggerHandler(u.onError,[y]);p.reject(y);c.stop();return}if(c.state!==r.connectionState.disconnected){var w=i[s],h=r.transports[w],l=!1,v=function(){l||(l=!0,t.clearTimeout(c._.onFailedTimeoutHandle),h.stop(c),d(i,s+1))};c.transport=h;try{c._.onFailedTimeoutHandle=t.setTimeout(function(){c.log(h.name+" timed out when trying to connect.");v()},c._.totalTransportConnectTimeout);h.start(c,function(){var i=function(){var i=r._.firefoxMajorVersion(t.navigator.userAgent)>=11,f=!!c.withCredentials&&i;c.log("The start request succeeded. Transitioning to the connected state.");a(c)&&r.transports._logic.monitorKeepAlive(c);r.transports._logic.startHeartbeat(c);r._.configurePingInterval(c);o(c,r.connectionState.connecting,r.connectionState.connected)||c.log("WARNING! The connection was not in the connecting state.");c._.connectingMessageBuffer.drain();n(c).triggerHandler(u.onStart);e.bind("unload",function(){c.log("Window unloading, stopping the connection.");c.stop(f)});i&&e.bind("beforeunload",function(){t.setTimeout(function(){c.stop(f)},0)})};if(!l){if(l=!0,t.clearTimeout(c._.onFailedTimeoutHandle),c.state===r.connectionState.disconnected)return;c.log(h.name+" transport selected. Initiating start request.");r.transports._logic.ajaxStart(c,i)}},v)}catch(b){c.log(h.name+" transport threw '"+b.message+"' when attempting to start.");v()}}},b=c.url+"/negotiate",g=function(t,i){var e=r._.error(f.errorOnNegotiate,t,i._.negotiateRequest);n(i).triggerHandler(u.onError,e);p.reject(e);i.stop()},n(c).triggerHandler(u.onStarting),b=r.transports._logic.prepareQueryString(c,b),c.log("Negotiating with '"+b+"'."),c._.negotiateRequest=r.transports._logic.ajax(c,{url:b,error:function(n,t){t!==l?g(n,c):p.reject(r._.error(f.stoppedWhileNegotiating,null,c._.negotiateRequest))},success:function(t){var i,e,h,o=[],s=[];try{i=c._parseResponse(t)}catch(l){g(r._.error(f.errorParsingNegotiateResponse,l),c);return}if(e=c._.keepAliveData,c.appRelativeUrl=i.Url,c.id=i.ConnectionId,c.token=i.ConnectionToken,c.webSocketServerUrl=i.WebSocketServerUrl,c._.longPollDelay=i.LongPollDelay*1e3,c.disconnectTimeout=i.DisconnectTimeout*1e3,c._.totalTransportConnectTimeout=c.transportConnectTimeout+i.TransportConnectTimeout*1e3,i.KeepAliveTimeout?(e.activated=!0,e.timeout=i.KeepAliveTimeout*1e3,e.timeoutWarning=e.timeout*c.keepAliveWarnAt,c._.beatInterval=(e.timeout-e.timeoutWarning)/3):e.activated=!1,c.reconnectWindow=c.disconnectTimeout+(e.timeout||0),!i.ProtocolVersion||i.ProtocolVersion!==c.clientProtocol){h=r._.error(r._.format(f.protocolIncompatible,c.clientProtocol,i.ProtocolVersion));n(c).triggerHandler(u.onError,[h]);p.reject(h);return}n.each(r.transports,function(n){if(n.indexOf("_")===0||n==="webSockets"&&!i.TryWebSockets)return!0;s.push(n)});n.isArray(y.transport)?n.each(y.transport,function(t,i){n.inArray(i,s)>=0&&o.push(i)}):y.transport==="auto"?o=s:n.inArray(y.transport,s)>=0&&o.push(y.transport);d(o)}}),p.promise())},starting:function(t){var i=this;return n(i).bind(u.onStarting,function(){t.call(i)}),i},send:function(n){var t=this;if(t.state===r.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(t.state===r.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return t.transport.send(t,n),t},received:function(t){var i=this;return n(i).bind(u.onReceived,function(n,r){t.call(i,r)}),i},stateChanged:function(t){var i=this;return n(i).bind(u.onStateChanged,function(n,r){t.call(i,r)}),i},error:function(t){var i=this;return n(i).bind(u.onError,function(n,r,u){i.lastError=r;t.call(i,r,u)}),i},disconnected:function(t){var i=this;return n(i).bind(u.onDisconnect,function(){t.call(i)}),i},connectionSlow:function(t){var i=this;return n(i).bind(u.onConnectionSlow,function(){t.call(i)}),i},reconnecting:function(t){var i=this;return n(i).bind(u.onReconnecting,function(){t.call(i)}),i},reconnected:function(t){var i=this;return n(i).bind(u.onReconnect,function(){t.call(i)}),i},stop:function(i,h){var c=this,v=c._deferral;if(c._.deferredStartHandler&&e.unbind("load",c._.deferredStartHandler),delete c._.config,delete c._.deferredStartHandler,!s&&(!c._.config||c._.config.waitForPageLoad===!0)){c.log("Stopping connection prior to negotiate.");v&&v.reject(r._.error(f.stoppedWhileLoading));return}if(c.state!==r.connectionState.disconnected)return c.log("Stopping connection."),t.clearTimeout(c._.beatHandle),t.clearTimeout(c._.onFailedTimeoutHandle),t.clearInterval(c._.pingIntervalId),c.transport&&(c.transport.stop(c),h!==!1&&c.transport.abort(c,i),a(c)&&r.transports._logic.stopMonitoringKeepAlive(c),c.transport=null),c._.negotiateRequest&&(c._.negotiateRequest.abort(l),delete c._.negotiateRequest),r.transports._logic.tryAbortStartRequest(c),delete c._deferral,delete c.messageId,delete c.groupsToken,delete c.id,delete c._.pingIntervalId,delete c._.lastMessageAt,delete c._.lastActiveAt,delete c._.longPollDelay,c._.connectingMessageBuffer.clear(),o(c,c.state,r.connectionState.disconnected),n(c).triggerHandler(u.onDisconnect),c},log:function(n){w(n,this.logging)}};r.fn.init.prototype=r.fn;r.noConflict=function(){return n.connection===r&&(n.connection=c),r};n.connection&&(c=n.connection);n.connection=n.signalR=r})(window.jQuery,window),function(n,t){function e(n){n._.keepAliveData.monitoring&&s(n);r.markActive(n)&&(n._.beatHandle=t.setTimeout(function(){e(n)},n._.beatInterval))}function s(t){var r=t._.keepAliveData,f;t.state===i.connectionState.connected&&(f=(new Date).getTime()-t._.lastMessageAt,f>=r.timeout?(t.log("Keep alive timed out.  Notifying transport that connection has been lost."),t.transport.lostConnection(t)):f>=r.timeoutWarning?r.userNotified||(t.log("Keep alive has been missed, connection may be dead/slow."),n(t).triggerHandler(u.onConnectionSlow),r.userNotified=!0):r.userNotified=!1)}function f(n,t){var i=n.url+t;return n.transport&&(i+="?transport="+n.transport.name),r.prepareQueryString(n,i)}var i=n.signalR,u=n.signalR.events,h=n.signalR.changeState,o="__Start Aborted__",r;i.transports={};r=i.transports._logic={ajax:function(t,i){return n.ajax(n.extend(!0,{},n.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:t.withCredentials},contentType:t.contentType,dataType:t.ajaxDataType},i))},pingServer:function(t){var e,f,u=n.Deferred();return t.transport?(e=t.url+"/ping",e=r.addQs(e,t.qs),f=r.ajax(t,{url:e,success:function(n){var r;try{r=t._parseResponse(n)}catch(e){u.reject(i._.transportError(i.resources.pingServerFailedParse,t.transport,e,f));t.stop();return}r.Response==="pong"?u.resolve():u.reject(i._.transportError(i._.format(i.resources.pingServerFailedInvalidResponse,n),t.transport,null,f))},error:function(n){n.status===401||n.status===403?(u.reject(i._.transportError(i._.format(i.resources.pingServerFailedStatusCode,n.status),t.transport,n,f)),t.stop()):u.reject(i._.transportError(i.resources.pingServerFailed,t.transport,n,f))}})):u.reject(i._.transportError(i.resources.noConnectionTransport,t.transport)),u.promise()},prepareQueryString:function(n,i){var u;return u=r.addQs(i,"clientProtocol="+n.clientProtocol),u=r.addQs(u,n.qs),n.token&&(u+="&connectionToken="+t.encodeURIComponent(n.token)),n.data&&(u+="&connectionData="+t.encodeURIComponent(n.data)),u},addQs:function(t,i){var r=t.indexOf("?")!==-1?"&":"?",u;if(!i)return t;if(typeof i=="object")return t+r+n.param(i);if(typeof i=="string")return u=i.charAt(0),(u==="?"||u==="&")&&(r=""),t+r+i;throw new Error("Query string property must be either a string or object.");},getUrl:function(n,i,u,f){var s=i==="webSockets"?"":n.baseUrl,e=s+n.appRelativeUrl,o="transport="+i;return n.groupsToken&&(o+="&groupsToken="+t.encodeURIComponent(n.groupsToken)),u?(e+=f?"/poll":"/reconnect",n.messageId&&(o+="&messageId="+t.encodeURIComponent(n.messageId))):e+="/connect",e+="?"+o,e=r.prepareQueryString(n,e),e+("&tid="+Math.floor(Math.random()*11))},maximizePersistentResponse:function(n){return{MessageId:n.C,Messages:n.M,Initialized:typeof n.S!="undefined"?!0:!1,Disconnect:typeof n.D!="undefined"?!0:!1,ShouldReconnect:typeof n.T!="undefined"?!0:!1,LongPollDelay:n.L,GroupsToken:n.G}},updateGroups:function(n,t){t&&(n.groupsToken=t)},stringifySend:function(n,t){return typeof t=="string"||typeof t=="undefined"||t===null?t:n.json.stringify(t)},ajaxSend:function(t,e){var h=r.stringifySend(t,e),c=f(t,"/send"),o,s=function(t,r){n(r).triggerHandler(u.onError,[i._.transportError(i.resources.sendFailed,r.transport,t,o),e])};return o=r.ajax(t,{url:c,type:t.ajaxDataType==="jsonp"?"GET":"POST",contentType:i._.defaultContentType,data:{data:h},success:function(n){var i;if(n){try{i=t._parseResponse(n)}catch(u){s(u,t);t.stop();return}r.triggerReceived(t,i)}},error:function(n,i){i!=="abort"&&i!=="parsererror"&&s(n,t)}})},ajaxAbort:function(n,t){if(typeof n.transport!="undefined"){t=typeof t=="undefined"?!0:t;var i=f(n,"/abort");r.ajax(n,{url:i,async:t,timeout:1e3,type:"POST"});n.log("Fired ajax abort async = "+t+".")}},ajaxStart:function(t,e){var h=function(n){var i=t._deferral;i&&i.reject(n)},s=function(i){t.log("The start request failed. Stopping the connection.");n(t).triggerHandler(u.onError,[i]);h(i);t.stop()};t._.startRequest=r.ajax(t,{url:f(t,"/start"),success:function(n,r,u){var f;try{f=t._parseResponse(n)}catch(o){s(i._.error(i._.format(i.resources.errorParsingStartResponse,n),o,u));return}f.Response==="started"?e():s(i._.error(i._.format(i.resources.invalidStartResponse,n),null,u))},error:function(n,r,u){r!==o?s(i._.error(i.resources.errorDuringStartRequest,u,n)):(t.log("The start request aborted because connection.stop() was called."),h(i._.error(i.resources.stoppedDuringStartRequest,null,n)))}})},tryAbortStartRequest:function(n){n._.startRequest&&(n._.startRequest.abort(o),delete n._.startRequest)},tryInitialize:function(n,t,i){t.Initialized&&i?i():t.Initialized&&n.log("WARNING! The client received an init message after reconnecting.")},triggerReceived:function(t,i){t._.connectingMessageBuffer.tryBuffer(i)||n(t).triggerHandler(u.onReceived,[i])},processMessages:function(t,i,u){var f;r.markLastMessage(t);i&&(f=r.maximizePersistentResponse(i),r.updateGroups(t,f.GroupsToken),f.MessageId&&(t.messageId=f.MessageId),f.Messages&&(n.each(f.Messages,function(n,i){r.triggerReceived(t,i)}),r.tryInitialize(t,f,u)))},monitorKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring?t.log("Tried to monitor keep alive but it's already being monitored."):(i.monitoring=!0,r.markLastMessage(t),t._.keepAliveData.reconnectKeepAliveUpdate=function(){r.markLastMessage(t)},n(t).bind(u.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t.log("Now monitoring keep alive with a warning timeout of "+i.timeoutWarning+" and a connection lost timeout of "+i.timeout+"."))},stopMonitoringKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring&&(i.monitoring=!1,n(t).unbind(u.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t._.keepAliveData={},t.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(n){n._.lastActiveAt=(new Date).getTime();e(n)},markLastMessage:function(n){n._.lastMessageAt=(new Date).getTime()},markActive:function(n){return r.verifyLastActive(n)?(n._.lastActiveAt=(new Date).getTime(),!0):!1},isConnectedOrReconnecting:function(n){return n.state===i.connectionState.connected||n.state===i.connectionState.reconnecting},ensureReconnectingState:function(t){return h(t,i.connectionState.connected,i.connectionState.reconnecting)===!0&&n(t).triggerHandler(u.onReconnecting),t.state===i.connectionState.reconnecting},clearReconnectTimeout:function(n){n&&n._.reconnectTimeout&&(t.clearTimeout(n._.reconnectTimeout),delete n._.reconnectTimeout)},verifyLastActive:function(t){if((new Date).getTime()-t._.lastActiveAt>=t.reconnectWindow){var r=i._.format(i.resources.reconnectWindowTimeout,new Date(t._.lastActiveAt),t.reconnectWindow);return t.log(r),n(t).triggerHandler(u.onError,[i._.error(r,"TimeoutException")]),t.stop(!1,!1),!1}return!0},reconnect:function(n,u){var f=i.transports[u];if(r.isConnectedOrReconnecting(n)&&!n._.reconnectTimeout){if(!r.verifyLastActive(n))return;n._.reconnectTimeout=t.setTimeout(function(){r.verifyLastActive(n)&&(f.stop(n),r.ensureReconnectingState(n)&&(n.log(u+" reconnecting."),f.start(n)))},n.reconnectDelay)}},handleParseFailure:function(t,r,f,e,o){t.state===i.connectionState.connecting?(t.log("Failed to parse server response while attempting to connect."),e()):(n(t).triggerHandler(u.onError,[i._.transportError(i._.format(i.resources.parseFailed,r),t.transport,f,o)]),t.stop())},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,f=n.signalR.changeState,i=r.transports._logic;r.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(t,f){var e=i.stringifySend(t,f);try{t.socket.send(e)}catch(o){n(t).triggerHandler(u.onError,[r._.transportError(r.resources.webSocketsInvalidState,t.transport,o,t.socket),f])}},start:function(e,o,s){var h,c=!1,l=this,a=!o,v=n(e);if(!t.WebSocket){s();return}e.socket||(h=e.webSocketServerUrl?e.webSocketServerUrl:e.wsProtocol+e.host,h+=i.getUrl(e,this.name,a),e.log("Connecting to websocket endpoint '"+h+"'."),e.socket=new t.WebSocket(h),e.socket.onopen=function(){c=!0;e.log("Websocket opened.");i.clearReconnectTimeout(e);f(e,r.connectionState.reconnecting,r.connectionState.connected)===!0&&v.triggerHandler(u.onReconnect)},e.socket.onclose=function(t){if(this===e.socket){if(c)typeof t.wasClean!="undefined"&&t.wasClean===!1?(n(e).triggerHandler(u.onError,[r._.transportError(r.resources.webSocketClosed,e.transport,t)]),e.log("Unclean disconnect from websocket: "+t.reason||"[no reason given].")):e.log("Websocket closed.");else{s?s():a&&l.reconnect(e);return}l.reconnect(e)}},e.socket.onmessage=function(t){var r;try{r=e._parseResponse(t.data)}catch(u){i.handleParseFailure(e,t.data,u,s,t);return}r&&(n.isEmptyObject(r)||r.M?i.processMessages(e,r,o):i.triggerReceived(e,r))})},reconnect:function(n){i.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},stop:function(n){i.clearReconnectTimeout(n);n.socket&&(n.log("Closing the Websocket."),n.socket.close(),n.socket=null)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){var i=n.signalR,u=n.signalR.events,e=n.signalR.changeState,r=i.transports._logic,f=function(n){t.clearTimeout(n._.reconnectAttemptTimeoutHandle);delete n._.reconnectAttemptTimeoutHandle};i.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(o,s,h){var c=this,l=!1,a=n(o),v=!s,y;if(o.eventSource&&(o.log("The connection already has an event source. Stopping it."),o.stop()),!t.EventSource){h&&(o.log("This browser doesn't support SSE."),h());return}y=r.getUrl(o,this.name,v);try{o.log("Attempting to connect to SSE endpoint '"+y+"'.");o.eventSource=new t.EventSource(y,{withCredentials:o.withCredentials})}catch(p){o.log("EventSource failed trying to connect with error "+p.Message+".");h?h():(a.triggerHandler(u.onError,[i._.transportError(i.resources.eventSourceFailedToConnect,o.transport,p)]),v&&c.reconnect(o));return}v&&(o._.reconnectAttemptTimeoutHandle=t.setTimeout(function(){l===!1&&o.eventSource.readyState!==t.EventSource.OPEN&&c.reconnect(o)},c.timeOut));o.eventSource.addEventListener("open",function(){o.log("EventSource connected.");f(o);r.clearReconnectTimeout(o);l===!1&&(l=!0,e(o,i.connectionState.reconnecting,i.connectionState.connected)===!0&&a.triggerHandler(u.onReconnect))},!1);o.eventSource.addEventListener("message",function(n){var t;if(n.data!=="initialized"){try{t=o._parseResponse(n.data)}catch(i){r.handleParseFailure(o,n.data,i,h,n);return}r.processMessages(o,t,s)}},!1);o.eventSource.addEventListener("error",function(n){if(this===o.eventSource){if(!l){h&&h();return}o.log("EventSource readyState: "+o.eventSource.readyState+".");n.eventPhase===t.EventSource.CLOSED?(o.log("EventSource reconnecting due to the server connection ending."),c.reconnect(o)):(o.log("EventSource error."),a.triggerHandler(u.onError,[i._.transportError(i.resources.eventSourceError,o.transport,n)]))}},!1)},reconnect:function(n){r.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){r.ajaxSend(n,t)},stop:function(n){f(n);r.clearReconnectTimeout(n);n&&n.eventSource&&(n.log("EventSource calling close()."),n.eventSource.close(),n.eventSource=null,delete n.eventSource)},abort:function(n,t){r.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){var r=n.signalR,e=n.signalR.events,o=n.signalR.changeState,i=r.transports._logic,u=function(){var n=t.document.createElement("iframe");return n.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),n},f=function(){var i=null,f=1e3,n=0;return{prevent:function(){r._.ieVersion<=8&&(n===0&&(i=t.setInterval(function(){var n=u();t.document.body.appendChild(n);t.document.body.removeChild(n);n=null},f)),n++)},cancel:function(){n===1&&t.clearInterval(i);n>0&&n--}}}();r.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(n,r,e){var l=this,s=i.foreverFrame.count+=1,h,o=u(),c=function(){n.log("Forever frame iframe finished loading and is no longer receiving messages.");l.reconnect(n)};if(t.EventSource){e&&(n.log("This browser supports SSE, skipping Forever Frame."),e());return}o.setAttribute("data-signalr-connection-id",n.id);f.prevent();h=i.getUrl(n,this.name);h+="&frameId="+s;t.document.body.appendChild(o);n.log("Binding to iframe's load event.");o.addEventListener?o.addEventListener("load",c,!1):o.attachEvent&&o.attachEvent("onload",c);o.src=h;i.foreverFrame.connections[s]=n;n.frame=o;n.frameId=s;r&&(n.onSuccess=function(){n.log("Iframe transport started.");r()})},reconnect:function(n){var r=this;i.isConnectedOrReconnecting(n)&&i.verifyLastActive(n)&&t.setTimeout(function(){if(i.verifyLastActive(n)&&n.frame&&i.ensureReconnectingState(n)){var u=n.frame,t=i.getUrl(n,r.name,!0)+"&frameId="+n.frameId;n.log("Updating iframe src to '"+t+"'.");u.src=t}},n.reconnectDelay)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){i.ajaxSend(n,t)},receive:function(t,u){var f,e,o;if(t.json!==t._originalJson&&(u=t._originalJson.stringify(u)),o=t._parseResponse(u),i.processMessages(t,o,t.onSuccess),t.state===n.signalR.connectionState.connected&&(t.frameMessageCount=(t.frameMessageCount||0)+1,t.frameMessageCount>r.transports.foreverFrame.iframeClearThreshold&&(t.frameMessageCount=0,f=t.frame.contentWindow||t.frame.contentDocument,f&&f.document&&f.document.body)))for(e=f.document.body;e.firstChild;)e.removeChild(e.firstChild)},stop:function(n){var r=null;if(f.cancel(),n.frame){if(n.frame.stop)n.frame.stop();else try{r=n.frame.contentWindow||n.frame.contentDocument;r.document&&r.document.execCommand&&r.document.execCommand("Stop")}catch(u){n.log("Error occured when stopping foreverFrame transport. Message = "+u.message+".")}n.frame.parentNode===t.document.body&&t.document.body.removeChild(n.frame);delete i.foreverFrame.connections[n.frameId];n.frame=null;n.frameId=null;delete n.frame;delete n.frameId;delete n.onSuccess;delete n.frameMessageCount;n.log("Stopping forever frame.")}},abort:function(n,t){i.ajaxAbort(n,t)},getConnection:function(n){return i.foreverFrame.connections[n]},started:function(t){o(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&n(t).triggerHandler(e.onReconnect)}}}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,e=n.signalR.changeState,f=n.signalR.isDisconnecting,i=r.transports._logic,o=function(){try{return"onprogress"in new t.XMLHttpRequest}catch(n){return!1}}();r.transports.longPolling={name:"longPolling",supportsKeepAlive:function(n){return o&&n.ajaxDataType!=="jsonp"&&n._.longPollDelay===0},reconnectDelay:3e3,start:function(o,s,h){var a=this,v=function(){v=n.noop;h=null;o.log("LongPolling connected.");s?s():o.log("WARNING! The client received an init message after reconnecting.")},y=function(){return h?(h(),h=null,o.log("LongPolling failed to connect."),!0):!1},c=o._,l=0,p=function(i){t.clearTimeout(c.reconnectTimeoutId);c.reconnectTimeoutId=null;e(i,r.connectionState.reconnecting,r.connectionState.connected)===!0&&(i.log("Raising the reconnect event"),n(i).triggerHandler(u.onReconnect))},w=36e5;o.pollXhr&&(o.log("Polling xhr requests already exists, aborting."),o.stop());o.messageId=null;c.reconnectTimeoutId=null;c.pollTimeoutId=t.setTimeout(function(){(function e(s,h){var d=s.messageId,g=d===null,b=!g,nt=!h,k=i.getUrl(s,a.name,b,nt);f(s)!==!0&&(o.log("Opening long polling request to '"+k+"'."),s.pollXhr=i.ajax(o,{xhrFields:{onprogress:function(){i.markLastMessage(o)}},url:k,success:function(r){var h,w=0,u,a;o.log("Long poll complete.");l=0;try{h=o._parseResponse(r)}catch(b){i.handleParseFailure(s,r,b,y,s.pollXhr);return}(c.reconnectTimeoutId!==null&&p(s),h&&(u=i.maximizePersistentResponse(h)),i.processMessages(s,h,v),u&&n.type(u.LongPollDelay)==="number"&&(w=u.LongPollDelay),u&&u.Disconnect)||f(s)!==!0&&(a=u&&u.ShouldReconnect,!a||i.ensureReconnectingState(s))&&(w>0?c.pollTimeoutId=t.setTimeout(function(){e(s,a)},w):e(s,a))},error:function(f,h){if(t.clearTimeout(c.reconnectTimeoutId),c.reconnectTimeoutId=null,h==="abort"){o.log("Aborted xhr request.");return}if(!y()){if(l++,o.state!==r.connectionState.reconnecting&&(o.log("An error occurred using longPolling. Status = "+h+".  Response = "+f.responseText+"."),n(s).triggerHandler(u.onError,[r._.transportError(r.resources.longPollFailed,o.transport,f,s.pollXhr)])),(o.state===r.connectionState.connected||o.state===r.connectionState.reconnecting)&&!i.verifyLastActive(o))return;if(!i.ensureReconnectingState(s))return;c.pollTimeoutId=t.setTimeout(function(){e(s,!0)},a.reconnectDelay)}}}),b&&h===!0&&(c.reconnectTimeoutId=t.setTimeout(function(){p(s)},Math.min(1e3*(Math.pow(2,l)-1),w))))})(o)},250)},lostConnection:function(n){n.pollXhr&&n.pollXhr.abort("lostConnection")},send:function(n,t){i.ajaxSend(n,t)},stop:function(n){t.clearTimeout(n._.pollTimeoutId);t.clearTimeout(n._.reconnectTimeoutId);delete n._.pollTimeoutId;delete n._.reconnectTimeoutId;n.pollXhr&&(n.pollXhr.abort(),n.pollXhr=null,delete n.pollXhr)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n){function r(n){return n+s}function e(n,t,i){for(var f=n.length,u=[],r=0;r<f;r+=1)n.hasOwnProperty(r)&&(u[r]=t.call(i,n[r],r,n));return u}function o(t){return n.isFunction(t)?null:n.type(t)==="undefined"?null:t}function u(n){for(var t in n)if(n.hasOwnProperty(t))return!0;return!1}function f(n,t){var i=n._.invocationCallbacks,r,f;u(i)&&n.log("Clearing hub invocation callbacks with error: "+t+".");n._.invocationCallbackId=0;delete n._.invocationCallbacks;n._.invocationCallbacks={};for(f in i)r=i[f],r.method.call(r.scope,{E:t})}function i(n,t){return new i.fn.init(n,t)}function t(i,r){var u={qs:null,logging:!1,useDefaultPath:!0};return n.extend(u,r),(!i||u.useDefaultPath)&&(i=(i||"")+"/signalr"),new t.fn.init(i,u)}var s=".hubProxy",h=n.signalR;i.fn=i.prototype={init:function(n,t){this.state={};this.connection=n;this.hubName=t;this._={callbackMap:{}}},hasSubscriptions:function(){return u(this._.callbackMap)},on:function(t,i){var u=this,f=u._.callbackMap;return t=t.toLowerCase(),f[t]||(f[t]={}),f[t][i]=function(n,t){i.apply(u,t)},n(u).bind(r(t),f[t][i]),u},off:function(t,i){var e=this,o=e._.callbackMap,f;return t=t.toLowerCase(),f=o[t],f&&(f[i]?(n(e).unbind(r(t),f[i]),delete f[i],u(f)||delete o[t]):i||(n(e).unbind(r(t)),delete o[t])),e},invoke:function(t){var i=this,r=i.connection,s=n.makeArray(arguments).slice(1),c=e(s,o),f={H:i.hubName,M:t,A:c,I:r._.invocationCallbackId},u=n.Deferred(),l=function(f){var e=i._maximizeHubResponse(f),s,o;n.extend(i.state,e.State);e.Progress?u.notifyWith?u.notifyWith(i,[e.Progress.Data]):r._.progressjQueryVersionLogged||(r.log("A hub method invocation progress update was received but the version of jQuery in use ("+n.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),r._.progressjQueryVersionLogged=!0):e.Error?(e.StackTrace&&r.log(e.Error+"\n"+e.StackTrace+"."),s=e.IsHubException?"HubException":"Exception",o=h._.error(e.Error,s),o.data=e.ErrorData,r.log(i.hubName+"."+t+" failed to execute. Error: "+o.message),u.rejectWith(i,[o])):(r.log("Invoked "+i.hubName+"."+t),u.resolveWith(i,[e.Result]))};return r._.invocationCallbacks[r._.invocationCallbackId.toString()]={scope:i,method:l},r._.invocationCallbackId+=1,n.isEmptyObject(i.state)||(f.S=i.state),r.log("Invoking "+i.hubName+"."+t),r.send(f),u.promise()},_maximizeHubResponse:function(n){return{State:n.S,Result:n.R,Progress:n.P?{Id:n.P.I,Data:n.P.D}:null,Id:n.I,IsHubException:n.H,Error:n.E,StackTrace:n.T,ErrorData:n.D}}};i.fn.init.prototype=i.fn;t.fn=t.prototype=n.connection();t.fn.init=function(t,i){var e={qs:null,logging:!1,useDefaultPath:!0},u=this;n.extend(e,i);n.signalR.fn.init.call(u,t,e.qs,e.logging);u.proxies={};u._.invocationCallbackId=0;u._.invocationCallbacks={};u.received(function(t){var f,o,e,i,s,h;t&&(typeof t.P!="undefined"?(e=t.P.I.toString(),i=u._.invocationCallbacks[e],i&&i.method.call(i.scope,t)):typeof t.I!="undefined"?(e=t.I.toString(),i=u._.invocationCallbacks[e],i&&(u._.invocationCallbacks[e]=null,delete u._.invocationCallbacks[e],i.method.call(i.scope,t))):(f=this._maximizeClientHubInvocation(t),u.log("Triggering client hub event '"+f.Method+"' on hub '"+f.Hub+"'."),s=f.Hub.toLowerCase(),h=f.Method.toLowerCase(),o=this.proxies[s],n.extend(o.state,f.State),n(o).triggerHandler(r(h),[f.Args])))});u.error(function(n,t){var i,r;t&&(i=t.I,r=u._.invocationCallbacks[i],r&&(u._.invocationCallbacks[i]=null,delete u._.invocationCallbacks[i],r.method.call(r.scope,{E:n})))});u.reconnecting(function(){u.transport&&u.transport.name==="webSockets"&&f(u,"Connection started reconnecting before invocation result was received.")});u.disconnected(function(){f(u,"Connection was disconnected before invocation result was received.")})};t.fn._maximizeClientHubInvocation=function(n){return{Hub:n.H,Method:n.M,Args:n.A,State:n.S}};t.fn._registerSubscribedHubs=function(){var t=this;t._subscribedToHubs||(t._subscribedToHubs=!0,t.starting(function(){var i=[];n.each(t.proxies,function(n){this.hasSubscriptions()&&(i.push({name:n}),t.log("Client subscribed to hub '"+n+"'."))});i.length===0&&t.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to.");t.data=t.json.stringify(i)}))};t.fn.createHubProxy=function(n){n=n.toLowerCase();var t=this.proxies[n];return t||(t=i(this,n),this.proxies[n]=t),this._registerSubscribedHubs(),t};t.fn.init.prototype=t.fn;n.hubConnection=t}(window.jQuery,window),function(n){n.signalR.version="2.1.1"}(window.jQuery);Type.registerNamespace("_Ewa");_Ewa.OD=function(n){this.b=Function.createDelegate(this,this.d);_Ewa.OD.initializeBase(this,[!1]);this.a=n;this.a.a(this.b)};_Ewa.OD.prototype={a:null,c:function(n){this.dQ("TSS",n)},e:function(n){this.dR("TSS",n)},d:function(n,t){this.dP("TSS",t,null)},dispose:function(){this.a.b(this.b);_Ewa.ce.prototype.dispose.call(this)}};_Ewa.xr=function(n){_Ewa.xr.initializeBase(this);this.a=n;this.e()};_Ewa.xr.a=function(n){Diag.a.a(577572894,0,50,"MergeSuspensionFactory.Attach");n.b().b(_Ewa.wZ.$$(_Ewa.jh),344,new _Ewa.xr(n))};_Ewa.xr.prototype={a:null,p:function(){Diag.a.a(577572893,0,50,"MergeSuspensionFactory.Create");this.d(this.a.b().a(_Ewa.jh,343,!1,null)||this.a.b().b(_Ewa.jh,343,new _Ewa.MergeSuspensionManager(this.a,null)))}};_Ewa.MergeSuspensionManager=function(n,t){_Ewa.MergeSuspensionManager.initializeBase(this,[!1]);Diag.a.a(577572892,0,50,"MergeSuspensionManager.ctor started");this.j=n;this.h=t?null:new _Ewa.OJ(n,null);var i=this.h||t;this.g=new _Ewa.OD(i);this.e=new _Ewa.OH(n);this.f=new _Ewa.OI(n,this.g,this.e,null);this.i=new _Ewa.OF(n,this);i.c();Diag.a.a(588276810,0,50,"MergeSuspensionManager created")};_Ewa.MergeSuspensionManager.prototype={j:null,h:null,i:null,g:null,e:null,f:null,a:function(n){this.f.n(n)},d:function(n){this.f&&this.f.r(n)},b:function(n){this.e.f(n)},dispose:function(){this.i&&(this.i.dispose(),this.i=null);this.f.dispose();this.f=null;this.e.dispose();this.e=null;this.g.dispose();this.g=null;this.h&&(this.h.dispose(),this.h=null);this.j=null;_Ewa.baX.prototype.dispose.call(this)},c:function(){this.f.l()}};_Ewa.OF=function(n,t){this.j=Function.createDelegate(this,this.o);this.i=Function.createDelegate(this,this.n);_Ewa.OF.initializeBase(this,[!1]);this.a=t;this.a.e.g(this.i);this.c="";_Ewa.dt.a(1905775613,511,0,1);this.f=n.h();this.b=new _Ewa.OF.a;var i=this;n.b().c(_Ewa.bX,29,function(n){i.a&&(i.e=n,n.c(i),i.a.g.a.a(i.j))},null);this.f.d(this.b,null)};_Ewa.OF.prototype={f:null,b:null,e:null,a:null,c:null,g:!1,m:function(n){this.dQ("MSMSC",n)},l:function(n){this.dR("MSMSC",n)},k:function(){this.dP("MSMSC",null,null)},h:function(n){return n==="QueryMergeSuspensionStatus"&&!!this.a},d:function(n,t){return this.h(n,null)?(this.a&&(t.LabelText=this.c,t.On=this.g),!0):!1},dispose:function(){this.b&&(this.f.e(this.b),this.b.dispose(),this.b=null);this.a&&(this.a.e.i(this.i),this.a.g.a.b(this.j),this.a=null);this.e&&(this.e.b(this),this.e=null);this.c=null;_Ewa.ce.prototype.dispose.call(this)},n:function(n,t){var i=String.format("{0}{1}",t.a.Current===t.a.Pending?"\u26ad":"\u26ae",t.a.Current);_Ewa.e.b(this.c,i,!1)||(this.c=i,this.k())},o:function(n,t){var i=t.a;this.g!==i&&(this.g=i,this.k())}};_Ewa.OF.a=function(){_Ewa.OF.a.initializeBase(this,[!1])};_Ewa.OF.a.prototype={z:function(){return!1},x:function(){return $$sc.a.a(Boolean,!0)},w:function(n,t){return t.a===1905775613},y:function(){return!1}};_Ewa.OG=function(){};_Ewa.OG.a=function(n,t,i,r,u){var f=n.a(1,u);return _Ewa.j.a(n,"DoPendingMerge",f,t,i,r,0,null)};_Ewa.OH=function(n){this.d=Function.createDelegate(this,this.k);this.c=Function.createDelegate(this,this.l);this.e=Function.createDelegate(this,this.m);_Ewa.OH.initializeBase(this,[!1]);this.j();this.a=n;this.a.d().d(this.e);this.a.c().g(this.c);this.a.c().E(this.c);var t=this;this.a.b().c(_Ewa.hs,292,function(n){n.a(t.d);Diag.a.a(588276809,0,50,"PendingMergeMonitor initialized")},null)};_Ewa.OH.prototype={a:null,b:null,g:function(n){this.dQ("MCU",n)},i:function(n){this.dR("MCU",n)},f:function(n){this.b.Current>=n.Current&&this.b.Pending>=n.Pending||(this.b=n,this.h(n))},dispose:function(){this.a.c().i(this.c);this.a.c().F(this.c);this.a.d().e(this.e);var n=this.a.b().a(_Ewa.hs,292,!1,null);n&&n.c(this.d);_Ewa.ce.prototype.dispose.call(this)},h:function(n){this.dP("MCU",new _Ewa.yI(n),null)},m:function(n,t){if(t&&t.a&&t.a.MergeCount){if(!_Ewa.e.b(t.a.SessionId,this.a.c().j(),!1)){Diag.a.a(579737049,0,50,"Stale merge counter ({0}/{1})",t.a.MergeCount.Current,t.a.MergeCount.Pending);return}this.f(t.a.MergeCount)}},k:function(n,t){t&&t.a&&this.f(t.a)},l:function(){this.j();this.h(this.b)},j:function(){Diag.a.a(588276808,0,50,"PendingMergeMonitor.ResetMergeCounter");var n;this.b=(n=new _Ewa.oP,n.Pending=0,n.Current=0,n)}};_Ewa.OI=function(n,t,i,r){var u,f;this.i=Function.createDelegate(this,this.t);this.g=Function.createDelegate(this,this.o);this.h=Function.createDelegate(this,this.p);_Ewa.OI.initializeBase(this,[!1]);this.b=n;this.j=!this.b.isChangeGateEnabled("OfficeVSO:4415953_DisableSpamTracesInEwajsMergeSuspension");this.d=t;this.d.c(this.h);this.f=i;this.f.g(this.g);this.a=new _Ewa.OI.a((u=new _Ewa.oP,u.Pending=0,u.Current=0,u),!1);this.b.d().i(this.i);r?this.c=r:(f=this,_Ewa.f.c(_Ewa.l.a(_Ewa.da,this.b.b(),12,this.b.i(),3,null),function(n){var t=new _Ewa.OI.b(f.b.d().a());f.c=n.a().b(t,t,null);f.k();Diag.a.a(588276807,0,50,"RequestController initialized")},this.b.i()))};_Ewa.OI.prototype={b:null,d:null,f:null,c:null,a:null,e:!1,j:!1,n:function(n){this.dQ("TPMBBC",n)},r:function(n){this.dR("TPMBBC",n)},m:function(n){return this.a=n,this.k(),n},dispose:function(){this.b.d().j(this.i);this.d.e(this.h);this.d=null;this.f.i(this.g);this.f=null;System.a.a(this.c);_Ewa.ce.prototype.dispose.call(this)},l:function(){this.dP("TPMBBC",new _Ewa.OK(this.e),null)},s:function(n){return n.b&&n.a.Pending>n.a.Current},k:function(){if(this.q(),this.j&&Diag.a.a(587744961,0,50,"RequestController.PropagateInputState: blocked: {0} MergeCounter: {1}/{2}, isSafeState: {3}",this.e,this.a.a.Current,this.a.a.Pending,this.a.b),this.c){var n=this.s(this.a);this.c.a(n?this.a:null)}},q:function(){var n=!this.a.b&&this.a.a.Pending>this.a.a.Current;n!==this.e&&(this.e=n,this.l())},o:function(n,t){this.m(new _Ewa.OI.a(t.a,this.a.b))},p:function(n,t){this.m(new _Ewa.OI.a(this.a.a,t.a))},t:function(n,t){t&&(t.a.MergeCount=this.a.a)}};_Ewa.OI.a=function(n,t){this.a=n;this.b=t};_Ewa.OI.a.prototype={a:null,b:!1};_Ewa.OI.b=function(n){this.c=n};_Ewa.OI.b.prototype={c:null,a:function(n){var t;if(n){var r=this.c.b(!1),i=n.a,f=this,u=function(){Diag.a.a(588276806,0,50,"DoPendingMergeThrottlingStrategy.PerformAction: request failed {0}/{1}",i.Current,i.Pending)};return _Ewa.OG.a(this.c,null,u,null,r)}return t=new($$sc.D.$$(Boolean)),t.b(!0),t.a},b:function(n){return n}};_Ewa.OJ=function(n,t){this.j=Function.createDelegate(this,this.o);this.k=Function.createDelegate(this,this.p);this.m=Function.createDelegate(this,this.r);this.l=Function.createDelegate(this,this.q);_Ewa.OJ.initializeBase(this,[!1]);this.f=n;this.g=!this.f.isChangeGateEnabled("OfficeVSO:4415953_DisableSpamTracesInEwajsMergeSuspension");this.e=t||_Ewa.R.a(n).c("cw0");_Ewa.R.a(n).g(this.l);this.e.c(this.m);this.d=_Ewa.b.a(n);this.d.h().c(this.k);this.d.h().g(this.j);this.i()};_Ewa.OJ.prototype={f:null,d:null,h:!1,g:!1,a:function(n){this.dQ("TSS",n)},b:function(n){this.dR("TSS",n)},e:null,s:function(n){return this.h!==n&&(this.h=n,this.c()),n},c:function(){if(this.g){var n=_Ewa.R.a(this.f).b();Diag.a.a(588305613,0,50,"SafeStatePublisher.RaiseCurrentState state: {0}, current activity = {1}, idleActivity is executing: {2}, gridView.IsEditing: {3}",this.h,n?n.b():"",this.e.a()===1,this.d.l())}this.dP("TSS",new _Ewa.OL(this.h),null)},o:function(){this.g&&Diag.a.a(587747482,0,50,"SafeStatePublisher.OnCellTextEditEnded gridView.IsEditing: {0}",this.d.l());this.i()},p:function(){this.g&&Diag.a.a(587747481,0,50,"SafeStatePublisher.OnCellTextEditStarted gridView.IsEditing: {0}",this.d.l());this.i()},dispose:function(){_Ewa.R.a(this.f).f(this.l);this.e.e(this.m);this.e=null;this.d.h().d(this.k);this.d.h().f(this.j);this.d=null;_Ewa.ce.prototype.dispose.call(this)},i:function(){this.s(this.n()&&!this.d.l())},n:function(){return this.e.a()===1||_Ewa.R.a(this.f).b()===this.e},r:function(){this.g&&Diag.a.a(587747480,0,50,"SafeStatePublisher.OnIdleActivityStatusChanged: {0}",this.e.a());this.i()},q:function(){if(this.g){var n=_Ewa.R.a(this.f).b();Diag.a.a(587747479,0,50,"SafeStatePublisher.OnCurrentActivityChanged: {0}",n?n.b():"")}this.i()}};_Ewa.OD.registerClass("_Ewa.OD",_Ewa.ce);_Ewa.xr.registerClass("_Ewa.xr",_Ewa.rw.$$(_Ewa.jh));_Ewa.MergeSuspensionManager.registerClass("_Ewa.MergeSuspensionManager",_Ewa.baX,_Ewa.jh,Sys.IDisposable);_Ewa.OF.registerClass("_Ewa.OF",_Ewa.ce,_Ewa.wB,Common.IRootUser,Sys.IDisposable);_Ewa.OF.a.registerClass("_Ewa.OF.a",_Ewa.baX,_Ewa.kx);_Ewa.OH.registerClass("_Ewa.OH",_Ewa.ce);_Ewa.OI.registerClass("_Ewa.OI",_Ewa.ce);_Ewa.OJ.registerClass("_Ewa.OJ",_Ewa.ce,_Ewa.bfg,Sys.IDisposable);Type.registerNamespace("_Ewa");_Ewa.bfh=function(){};_Ewa.bfh.a=function(){_Ewa.k.a(_Ewa.xr.a)};_Ewa.bfh.a();